import{S as a,a as s,s as l,m as t,k as n,a2 as c,z as r,B as e,g as o,e as i,b as u,t as f,c as h,d as m,f as d,h as p,j as $,w as g,l as v,p as E,r as b,q as k,P as w,D as y,I,U as D,J as V,R as T,n as P,A as C,L as N,a3 as x,u as A,v as O,x as B,C as S,a4 as U,a5 as M,i as q,a6 as R,a7 as j,a8 as H,a9 as z,aa as F,Y as J,N as L,ab as W,ac as Y,T as G,ad as K,ae as Q}from"./client.494a47e1.js";function X(a){let s,l,i,u={ctx:a,current:null,token:null,pending:la,then:_,catch:Z,value:9,error:10,blocks:[,,,]};return c(l=a[2],u),{c(){s=t(),u.block.c()},l(a){s=t(),u.block.l(a)},m(a,l){n(a,s,l),u.block.m(a,u.anchor=l),u.mount=(()=>s.parentNode),u.anchor=s,i=!0},p(s,t){if(a=s,u.ctx=a,4&t&&l!==(l=a[2])&&c(l,u));else{const s=a.slice();s[9]=u.resolved,u.block.p(s,t)}},i(a){i||(r(u.block),i=!0)},o(a){for(let a=0;a<3;a+=1){const s=u.blocks[a];e(s)}i=!1},d(a){a&&o(s),u.block.d(a),u.token=null,u=null}}}function Z(a){let s,l=a[10].message+"";return{c(){s=f(l)},l(a){s=p(a,l)},m(a,l){n(a,s,l)},p(a,t){4&t&&l!==(l=a[10].message+"")&&P(s,l)},i:C,o:C,d(a){a&&o(s)}}}function _(a){let s,l,c,i;const u=[sa,aa],f=[];function h(a,s){return a[9]?0:1}return s=h(a),l=f[s]=u[s](a),{c(){l.c(),c=t()},l(a){l.l(a),c=t()},m(a,l){f[s].m(a,l),n(a,c,l),i=!0},p(a,t){let n=s;(s=h(a))===n?f[s].p(a,t):(w(),e(f[n],1,1,()=>{f[n]=null}),y(),(l=f[s])||(l=f[s]=u[s](a)).c(),r(l,1),l.m(c.parentNode,c))},i(a){i||(r(l),i=!0)},o(a){e(l),i=!1},d(a){f[s].d(a),a&&o(c)}}}function aa(a){let s;return{c(){s=f("Error")},l(a){s=p(a,"Error")},m(a,l){n(a,s,l)},p:C,i:C,o:C,d(a){a&&o(s)}}}function sa(a){let s,l;const t=new N({props:{icon:U,class:"icon"}});return{c(){s=i("button"),A(t.$$.fragment),this.h()},l(a){s=h(a,"BUTTON",{class:!0});var l=m(s);O(t.$$.fragment,l),l.forEach(o),this.h()},h(){$(s,"class","button")},m(a,c){n(a,s,c),B(t,s,null),l=!0},p:C,i(a){l||(r(t.$$.fragment,a),l=!0)},o(a){e(t.$$.fragment,a),l=!1},d(a){a&&o(s),S(t)}}}function la(a){let s,l;const t=new N({props:{icon:x,spin:!0,class:"icon"}});return{c(){s=i("button"),A(t.$$.fragment),this.h()},l(a){s=h(a,"BUTTON",{class:!0});var l=m(s);O(t.$$.fragment,l),l.forEach(o),this.h()},h(){$(s,"class","button")},m(a,c){n(a,s,c),B(t,s,null),l=!0},p:C,i(a){l||(r(t.$$.fragment,a),l=!0)},o(a){e(t.$$.fragment,a),l=!1},d(a){a&&o(s),S(t)}}}function ta(a){let s,l,t,c,I,D,V,T,P,C,N,x,A,O,B,S,U,M,q,R,j,H=a[2]&&X(a);return{c(){s=i("div"),l=i("div"),t=u(),c=i("div"),I=i("header"),D=i("p"),V=f("Create playlist"),T=u(),P=i("button"),C=u(),N=i("section"),x=i("input"),A=u(),O=i("footer"),B=i("button"),S=f("Save changes"),U=u(),H&&H.c(),M=u(),q=i("button"),this.h()},l(a){s=h(a,"DIV",{class:!0});var n=m(s);l=h(n,"DIV",{class:!0}),m(l).forEach(o),t=d(n),c=h(n,"DIV",{class:!0});var r=m(c);I=h(r,"HEADER",{class:!0});var e=m(I);D=h(e,"P",{class:!0});var i=m(D);V=p(i,"Create playlist"),i.forEach(o),T=d(e),P=h(e,"BUTTON",{class:!0,"aria-label":!0}),m(P).forEach(o),e.forEach(o),C=d(r),N=h(r,"SECTION",{class:!0});var u=m(N);x=h(u,"INPUT",{class:!0,type:!0,name:!0,id:!0}),u.forEach(o),A=d(r),O=h(r,"FOOTER",{class:!0});var f=m(O);B=h(f,"BUTTON",{class:!0});var $=m(B);S=p($,"Save changes"),$.forEach(o),U=d(f),H&&H.l(f),f.forEach(o),r.forEach(o),M=d(n),q=h(n,"BUTTON",{class:!0,"aria-label":!0}),m(q).forEach(o),n.forEach(o),this.h()},h(){$(l,"class","modal-background"),$(D,"class","modal-card-title"),$(P,"class","delete"),$(P,"aria-label","close"),$(I,"class","modal-card-head"),$(x,"class","input"),$(x,"type","text"),$(x,"name","playlist name"),$(x,"id","playlist name"),$(N,"class","modal-card-body"),$(B,"class","button is-success"),$(O,"class","modal-card-foot"),$(c,"class","modal-card"),$(q,"class","modal-close is-large"),$(q,"aria-label","close"),$(s,"class","modal"),g(s,"is-active",a[0])},m(r,e,o){n(r,s,e),v(s,l),v(s,t),v(s,c),v(c,I),v(I,D),v(D,V),v(I,T),v(I,P),v(c,C),v(c,N),v(N,x),E(x,a[1]),v(c,A),v(c,O),v(O,B),v(B,S),v(O,U),H&&H.m(O,null),v(s,M),v(s,q),R=!0,o&&b(j),j=[k(l,"click",a[6]),k(x,"input",a[7]),k(B,"click",a[3]),k(q,"click",a[8])]},p(a,[l]){2&l&&x.value!==a[1]&&E(x,a[1]),a[2]?H?(H.p(a,l),r(H,1)):((H=X(a)).c(),r(H,1),H.m(O,null)):H&&(w(),e(H,1,1,()=>{H=null}),y()),1&l&&g(s,"is-active",a[0])},i(a){R||(r(H),R=!0)},o(a){e(H),R=!1},d(a){a&&o(s),H&&H.d(),b(j)}}}function na(a,s,l){let t;I(a,D,a=>l(4,t=a));let n,c="",{showCreatePlaylistModal:r}=s;V(async()=>{T(D,t=await connectWS())});const e=async()=>{return!!await t.playlists.create({name:c})&&(setTimeout(()=>{l(0,r=!r)},1500),!0)};return a.$set=(a=>{"showCreatePlaylistModal"in a&&l(0,r=a.showCreatePlaylistModal)}),[r,c,n,()=>{l(2,n=e())},t,e,()=>l(0,r=!r),function(){c=this.value,l(1,c)},()=>l(0,r=!r)]}class ca extends a{constructor(a){super(),s(this,a,na,ta,l,{showCreatePlaylistModal:0})}}function ra(a,s,l){const t=a.slice();return t[5]=s[l],t[7]=l,t}function ea(a){let s,l,t,c;return{c(){s=i("div"),l=i("p"),t=f("loading"),c=u(),this.h()},l(a){s=h(a,"DIV",{class:!0});var n=m(s);l=h(n,"P",{});var r=m(l);t=p(r,"loading"),r.forEach(o),c=d(n),n.forEach(o),this.h()},h(){$(s,"class","list-item")},m(a,r){n(a,s,r),v(s,l),v(l,t),v(s,c)},d(a){a&&o(s)}}}function oa(a){let s,l=a[9].message+"";return{c(){s=f(l)},l(a){s=p(a,l)},m(a,l){n(a,s,l)},p(a,t){2&t&&l!==(l=a[9].message+"")&&P(s,l)},d(a){a&&o(s)}}}function ia(a){let s,l,t,c=(a[8].tracks?a[8].tracks.length:"0")+"";return{c(){s=f("("),l=f(c),t=f(")")},l(a){s=p(a,"("),l=p(a,c),t=p(a,")")},m(a,c){n(a,s,c),n(a,l,c),n(a,t,c)},p(a,s){2&s&&c!==(c=(a[8].tracks?a[8].tracks.length:"0")+"")&&P(l,c)},d(a){a&&o(s),a&&o(l),a&&o(t)}}}function ua(a){let s;return{c(){s=f("loading..")},l(a){s=p(a,"loading..")},m(a,l){n(a,s,l)},p:C,d(a){a&&o(s)}}}function fa(a){let s,l,t,E,w,y,I,D,V,T,C,x,U,M,F,G,K,Q,X,Z,_,aa,sa,la,ta,na,ca,ra,ea,fa=a[5].name+"",ha={ctx:a,current:null,token:null,pending:ua,then:ia,catch:oa,value:8,error:9};c(D=z(a[5].uri),ha);const ma=new N({props:{icon:J,class:"icon","aria-haspopup":"true","aria-controls":"dropdown-menu"}});function da(...s){return a[4](a[5],...s)}const pa=new N({props:{icon:L,class:"icon is-small"}}),$a=new N({props:{icon:W,class:"icon is-small"}}),ga=new N({props:{icon:Y,class:"icon is-small"}});return{c(){s=i("div"),l=i("div"),t=i("a"),E=f(fa),y=u(),I=i("div"),ha.block.c(),V=u(),T=i("div"),C=i("div"),x=i("div"),A(ma.$$.fragment),U=u(),M=i("div"),F=i("div"),G=i("a"),A(pa.$$.fragment),K=f(" \n                  Play"),X=u(),Z=i("a"),A($a.$$.fragment),_=f(" \n                  Shuffle"),sa=u(),la=i("a"),A(ga.$$.fragment),ta=f(" \n                  Add to queue"),ca=u(),this.h()},l(a){s=h(a,"DIV",{class:!0});var n=m(s);l=h(n,"DIV",{class:!0});var c=m(l);t=h(c,"A",{class:!0,href:!0});var r=m(t);E=p(r,fa),r.forEach(o),y=d(c),I=h(c,"DIV",{class:!0});var e=m(I);ha.block.l(e),e.forEach(o),V=d(c),T=h(c,"DIV",{class:!0});var i=m(T);C=h(i,"DIV",{class:!0});var u=m(C);x=h(u,"DIV",{class:!0});var f=m(x);O(ma.$$.fragment,f),f.forEach(o),U=d(u),M=h(u,"DIV",{class:!0,id:!0,role:!0});var $=m(M);F=h($,"DIV",{class:!0});var g=m(F);G=h(g,"A",{href:!0,class:!0});var v=m(G);O(pa.$$.fragment,v),K=p(v," \n                  Play"),v.forEach(o),X=d(g),Z=h(g,"A",{href:!0,class:!0});var b=m(Z);O($a.$$.fragment,b),_=p(b," \n                  Shuffle"),b.forEach(o),sa=d(g),la=h(g,"A",{href:!0,class:!0});var k=m(la);O(ga.$$.fragment,k),ta=p(k," \n                  Add to queue"),k.forEach(o),g.forEach(o),$.forEach(o),u.forEach(o),i.forEach(o),c.forEach(o),ca=d(n),n.forEach(o),this.h()},h(){$(t,"class","column"),$(t,"href",w="playlists/"+a[5].slug),$(I,"class","column is-narrow"),$(x,"class","dropdown-trigger"),$(G,"href",Q=null),$(G,"class","dropdown-item"),$(Z,"href",aa=null),$(Z,"class","dropdown-item"),$(la,"href",na=null),$(la,"class","dropdown-item"),$(F,"class","dropdown-content"),$(M,"class","dropdown-menu"),$(M,"id","dropdown-menu"),$(M,"role","menu"),$(C,"class","dropdown is-right is-up"),g(C,"is-active",a[5].visibility),$(T,"class","column is-narrow"),$(l,"class","columns is-mobile"),$(s,"class","list-item")},m(c,r,e){n(c,s,r),v(s,l),v(l,t),v(t,E),v(l,y),v(l,I),ha.block.m(I,ha.anchor=null),ha.mount=(()=>I),ha.anchor=null,v(l,V),v(l,T),v(T,C),v(C,x),B(ma,x,null),v(C,U),v(C,M),v(M,F),v(F,G),B(pa,G,null),v(G,K),v(F,X),v(F,Z),B($a,Z,null),v(Z,_),v(F,sa),v(F,la),B(ga,la,null),v(la,ta),v(s,ca),ra=!0,e&&b(ea),ea=[k(x,"click",da),k(G,"click",function(){q(R(a[5].uri))&&R(a[5].uri).apply(this,arguments)}),k(Z,"click",function(){q(j(a[5].uri))&&j(a[5].uri).apply(this,arguments)}),k(la,"click",function(){q(H(a[5].uri))&&H(a[5].uri).apply(this,arguments)})]},p(s,l){if(a=s,(!ra||2&l)&&fa!==(fa=a[5].name+"")&&P(E,fa),(!ra||2&l&&w!==(w="playlists/"+a[5].slug))&&$(t,"href",w),ha.ctx=a,2&l&&D!==(D=z(a[5].uri))&&c(D,ha));else{const s=a.slice();s[8]=ha.resolved,ha.block.p(s,l)}2&l&&g(C,"is-active",a[5].visibility)},i(a){ra||(r(ma.$$.fragment,a),r(pa.$$.fragment,a),r($a.$$.fragment,a),r(ga.$$.fragment,a),ra=!0)},o(a){e(ma.$$.fragment,a),e(pa.$$.fragment,a),e($a.$$.fragment,a),e(ga.$$.fragment,a),ra=!1},d(a){a&&o(s),ha.block.d(),ha.token=null,ha=null,S(ma),S(pa),S($a),S(ga),b(ea)}}}function ha(a){let s,l,t,c,g,E,b,I,D,V,T,P,C;const x=new N({props:{icon:M,class:"icon"}}),U=new ca({props:{showCreatePlaylistModal:a[0]}});let q=a[1],R=[];for(let s=0;s<q.length;s+=1)R[s]=fa(ra(a,q,s));const j=a=>e(R[a],1,1,()=>{R[a]=null});let H=null;return q.length||(H=ea()),{c(){s=i("div"),l=i("div"),t=i("h1"),c=f("Playlists"),g=u(),E=i("div"),b=i("a"),A(x.$$.fragment),D=u(),A(U.$$.fragment),V=u(),T=i("div");for(let a=0;a<R.length;a+=1)R[a].c();H&&H.c(),this.h()},l(a){s=h(a,"DIV",{class:!0});var n=m(s);l=h(n,"DIV",{class:!0});var r=m(l);t=h(r,"H1",{class:!0});var e=m(t);c=p(e,"Playlists"),e.forEach(o),r.forEach(o),g=d(n),E=h(n,"DIV",{class:!0});var i=m(E);b=h(i,"A",{class:!0,href:!0});var u=m(b);O(x.$$.fragment,u),u.forEach(o),i.forEach(o),n.forEach(o),D=d(a),O(U.$$.fragment,a),V=d(a),T=h(a,"DIV",{class:!0});var f=m(T);for(let a=0;a<R.length;a+=1)R[a].l(f);H&&H.l(f),f.forEach(o),this.h()},h(){$(t,"class","title"),$(l,"class","column"),$(b,"class","button"),$(b,"href",I=null),$(E,"class","column is-narrow"),$(s,"class","columns is-mobile"),$(T,"class","list is-hoverable")},m(r,e,o){n(r,s,e),v(s,l),v(l,t),v(t,c),v(s,g),v(s,E),v(E,b),B(x,b,null),n(r,D,e),B(U,r,e),n(r,V,e),n(r,T,e);for(let a=0;a<R.length;a+=1)R[a].m(T,null);H&&H.m(T,null),P=!0,o&&C(),C=k(b,"click",a[3])},p(a,[s]){const l={};if(1&s&&(l.showCreatePlaylistModal=a[0]),U.$set(l),2&s){let l;for(q=a[1],l=0;l<q.length;l+=1){const t=ra(a,q,l);R[l]?(R[l].p(t,s),r(R[l],1)):(R[l]=fa(t),R[l].c(),r(R[l],1),R[l].m(T,null))}for(w(),l=q.length;l<R.length;l+=1)j(l);y(),q.length?H&&(H.d(1),H=null):H||((H=ea()).c(),H.m(T,null))}},i(a){if(!P){r(x.$$.fragment,a),r(U.$$.fragment,a);for(let a=0;a<q.length;a+=1)r(R[a]);P=!0}},o(a){e(x.$$.fragment,a),e(U.$$.fragment,a),R=R.filter(Boolean);for(let a=0;a<R.length;a+=1)e(R[a]);P=!1},d(a){a&&o(s),S(x),a&&o(D),S(U,a),a&&o(V),a&&o(T),F(R,a),H&&H.d(),C()}}}function ma(a,s,l){let t,n;I(a,D,a=>l(2,t=a)),I(a,Q,a=>l(1,n=a));let c=!1;V(async()=>{T(D,t=await G()),T(Q,n=await K())});return[c,n,t,()=>l(0,c=!c),a=>T(Q,a.visibility=!a.visibility,n)]}export default class extends a{constructor(a){super(),s(this,a,ma,ha,l,{})}}
