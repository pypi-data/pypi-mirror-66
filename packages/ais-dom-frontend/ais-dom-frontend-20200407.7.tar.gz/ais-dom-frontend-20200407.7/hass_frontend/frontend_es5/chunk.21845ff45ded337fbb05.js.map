{"version":3,"sources":["webpack:///./node_modules/@polymer/paper-dialog-behavior/paper-dialog-behavior.js","webpack:///./node_modules/@polymer/paper-dialog-behavior/paper-dialog-shared-styles.js","webpack:///./src/components/dialog/ha-iron-focusables-helper.js","webpack:///./src/components/dialog/ha-paper-dialog.ts","webpack:///./node_modules/@polymer/paper-dialog/paper-dialog.js","webpack:///./src/resources/codemirror.ondemand.ts","webpack:///./src/components/ha-code-editor.ts","webpack:///./src/components/ha-yaml-editor.ts","webpack:///./src/panels/lovelace/editor/hui-dialog-save-config.ts"],"names":["__webpack_require__","d","__webpack_exports__","PaperDialogBehaviorImpl","PaperDialogBehavior","_polymer_iron_overlay_behavior_iron_overlay_behavior_js__WEBPACK_IMPORTED_MODULE_1__","_polymer_polymer_lib_legacy_polymer_dom_js__WEBPACK_IMPORTED_MODULE_2__","hostAttributes","role","tabindex","properties","modal","type","Boolean","value","__readied","observers","listeners","tap","ready","this","__prevNoCancelOnOutsideClick","noCancelOnOutsideClick","__prevNoCancelOnEscKey","noCancelOnEscKey","__prevWithBackdrop","withBackdrop","_modalChanged","readied","_updateClosingReasonConfirmed","confirmed","closingReason","_onDialogClick","event","path","dom","i","l","indexOf","target","hasAttribute","close","stopPropagation","IronOverlayBehavior","$_documentContainer","document","createElement","setAttribute","innerHTML","head","appendChild","content","HaIronFocusablesHelper","getTabbableNodes","node","result","_collectTabbableNodes","IronFocusablesHelper","_sortByTabIndex","nodeType","Node","ELEMENT_NODE","_isVisible","children","element","tabIndex","_normalizedTabIndex","needsSort","push","localName","getDistributedNodes","shadowRoot","root","length","paperDialogClass","customElements","get","haTabFixBehaviorImpl","_focusableNodes","HaPaperDialog","_mixinBehaviors","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","apply","arguments","_inherits","mixinBehaviors","define","Polymer","_template","html","_templateObject","is","behaviors","NeonAnimationRunnerBehavior","neon-animation-finish","_renderOpened","cancelAnimation","playAnimation","_renderClosed","_onNeonAnimationFinish","opened","_finishRenderOpened","_finishRenderClosed","loaded","loadCodeMirror","_ref","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","Promise","all","e","then","bind","abrupt","stop","_decorate","customElement","_initialize","_UpdatingElement","HaCodeEditor","_UpdatingElement2","_getPrototypeOf2","_this","_len","args","Array","_key","call","concat","_assertThisInitialized","F","kind","key","decorators","property","_value","codemirror","getValue","querySelector","_get","prototype","refresh","autofocus","focus","changedProps","has","setOption","mode","setValue","_calcGutters","_setScrollBarDirection","classList","toggle","error","_load","_load2","codeMirror","_this2","sent","attachShadow","codeMirrorCss","lineNumbers","tabSize","viewportMargin","Infinity","extraKeys","Tab","Shift-Tab","gutters","on","_onChange","newValue","fireEvent","rtl","getWrapperElement","UpdatingElement","_LitElement","_LitElement2","HaYamlEditor","query","_yaml","obj","_typeof","hasOwnProperty","isEmpty","safeDump","err","alert","afterNextRender","_this2$_editor","_editor","defaultValue","undefined","label","_templateObject2","isValid","ev","parsed","detail","safeLoad","LitElement","EMPTY_CONFIG","views","HuiSaveConfig","_saving","_showDialog","_asyncToGenerator","params","_params","_emptyConfig","updateComplete","_dialog","open","_x","_openedChanged","hass","localize","_templateObject3","_emptyConfigChanged","_templateObject4","lovelace","config","_editorRefreshed","_templateObject5","_closeDialog","_saveConfig","_templateObject6","checked","_saveConfig2","_callee2","_context2","saveConfig","setEditMode","t0","message","static","haStyleDialog","css","_templateObject7"],"mappings":"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","file":"chunk.21845ff45ded337fbb05.js","sourcesContent":["/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport {IronOverlayBehavior} from '@polymer/iron-overlay-behavior/iron-overlay-behavior.js';\nimport {dom} from '@polymer/polymer/lib/legacy/polymer.dom.js';\n\n/**\n  Use `Polymer.PaperDialogBehavior` and `paper-dialog-shared-styles.html` to\n  implement a Material Design dialog.\n\n  For example, if `<paper-dialog-impl>` implements this behavior:\n\n      <paper-dialog-impl>\n          <h2>Header</h2>\n          <div>Dialog body</div>\n          <div class=\"buttons\">\n              <paper-button dialog-dismiss>Cancel</paper-button>\n              <paper-button dialog-confirm>Accept</paper-button>\n          </div>\n      </paper-dialog-impl>\n\n  `paper-dialog-shared-styles.html` provide styles for a header, content area,\n  and an action area for buttons. Use the `<h2>` tag for the header and the\n  `buttons` class for the action area. You can use the `paper-dialog-scrollable`\n  element (in its own repository) if you need a scrolling content area.\n\n  Use the `dialog-dismiss` and `dialog-confirm` attributes on interactive\n  controls to close the dialog. If the user dismisses the dialog with\n  `dialog-confirm`, the `closingReason` will update to include `confirmed:\n  true`.\n\n  ### Accessibility\n\n  This element has `role=\"dialog\"` by default. Depending on the context, it may\n  be more appropriate to override this attribute with `role=\"alertdialog\"`.\n\n  If `modal` is set, the element will prevent the focus from exiting the\n  element. It will also ensure that focus remains in the dialog.\n\n  @hero hero.svg\n  @demo demo/index.html\n  @polymerBehavior PaperDialogBehavior\n */\nexport const PaperDialogBehaviorImpl = {\n\n  hostAttributes: {'role': 'dialog', 'tabindex': '-1'},\n\n  properties: {\n\n    /**\n     * If `modal` is true, this implies `no-cancel-on-outside-click`,\n     * `no-cancel-on-esc-key` and `with-backdrop`.\n     */\n    modal: {type: Boolean, value: false},\n\n    __readied: {type: Boolean, value: false}\n\n  },\n\n  observers: ['_modalChanged(modal, __readied)'],\n\n  listeners: {'tap': '_onDialogClick'},\n\n  /**\n   * @return {void}\n   */\n  ready: function() {\n    // Only now these properties can be read.\n    this.__prevNoCancelOnOutsideClick = this.noCancelOnOutsideClick;\n    this.__prevNoCancelOnEscKey = this.noCancelOnEscKey;\n    this.__prevWithBackdrop = this.withBackdrop;\n    this.__readied = true;\n  },\n\n  _modalChanged: function(modal, readied) {\n    // modal implies noCancelOnOutsideClick, noCancelOnEscKey and withBackdrop.\n    // We need to wait for the element to be ready before we can read the\n    // properties values.\n    if (!readied) {\n      return;\n    }\n\n    if (modal) {\n      this.__prevNoCancelOnOutsideClick = this.noCancelOnOutsideClick;\n      this.__prevNoCancelOnEscKey = this.noCancelOnEscKey;\n      this.__prevWithBackdrop = this.withBackdrop;\n      this.noCancelOnOutsideClick = true;\n      this.noCancelOnEscKey = true;\n      this.withBackdrop = true;\n    } else {\n      // If the value was changed to false, let it false.\n      this.noCancelOnOutsideClick =\n          this.noCancelOnOutsideClick && this.__prevNoCancelOnOutsideClick;\n      this.noCancelOnEscKey =\n          this.noCancelOnEscKey && this.__prevNoCancelOnEscKey;\n      this.withBackdrop = this.withBackdrop && this.__prevWithBackdrop;\n    }\n  },\n\n  _updateClosingReasonConfirmed: function(confirmed) {\n    this.closingReason = this.closingReason || {};\n    this.closingReason.confirmed = confirmed;\n  },\n\n  /**\n   * Will dismiss the dialog if user clicked on an element with dialog-dismiss\n   * or dialog-confirm attribute.\n   */\n  _onDialogClick: function(event) {\n    // Search for the element with dialog-confirm or dialog-dismiss,\n    // from the root target until this (excluded).\n    var path = dom(event).path;\n    for (var i = 0, l = path.indexOf(this); i < l; i++) {\n      var target = path[i];\n      if (target.hasAttribute &&\n          (target.hasAttribute('dialog-dismiss') ||\n           target.hasAttribute('dialog-confirm'))) {\n        this._updateClosingReasonConfirmed(\n            target.hasAttribute('dialog-confirm'));\n        this.close();\n        event.stopPropagation();\n        break;\n      }\n    }\n  }\n\n};\n\n/** @polymerBehavior */\nexport const PaperDialogBehavior =\n    [IronOverlayBehavior, PaperDialogBehaviorImpl];\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n/*\n### Styling\n\nThe following custom properties and mixins are available for styling.\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-dialog-background-color` | Dialog background color | `--primary-background-color`\n`--paper-dialog-color` | Dialog foreground color | `--primary-text-color`\n`--paper-dialog` | Mixin applied to the dialog | `{}`\n`--paper-dialog-title` | Mixin applied to the title (`<h2>`) element | `{}`\n`--paper-dialog-button-color` | Button area foreground color | `--default-primary-color`\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/paper-styles/typography.js';\nimport '@polymer/paper-styles/shadow.js';\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.setAttribute('style', 'display: none;');\n\n$_documentContainer.innerHTML = `<dom-module id=\"paper-dialog-shared-styles\">\n  <template>\n    <style>\n      :host {\n        display: block;\n        margin: 24px 40px;\n\n        background: var(--paper-dialog-background-color, var(--primary-background-color));\n        color: var(--paper-dialog-color, var(--primary-text-color));\n\n        @apply --paper-font-body1;\n        @apply --shadow-elevation-16dp;\n        @apply --paper-dialog;\n      }\n\n      :host > ::slotted(*) {\n        margin-top: 20px;\n        padding: 0 24px;\n      }\n\n      :host > ::slotted(.no-padding) {\n        padding: 0;\n      }\n\n      \n      :host > ::slotted(*:first-child) {\n        margin-top: 24px;\n      }\n\n      :host > ::slotted(*:last-child) {\n        margin-bottom: 24px;\n      }\n\n      /* In 1.x, this selector was \\`:host > ::content h2\\`. In 2.x <slot> allows\n      to select direct children only, which increases the weight of this\n      selector, so we have to re-define first-child/last-child margins below. */\n      :host > ::slotted(h2) {\n        position: relative;\n        margin: 0;\n\n        @apply --paper-font-title;\n        @apply --paper-dialog-title;\n      }\n\n      /* Apply mixin again, in case it sets margin-top. */\n      :host > ::slotted(h2:first-child) {\n        margin-top: 24px;\n        @apply --paper-dialog-title;\n      }\n\n      /* Apply mixin again, in case it sets margin-bottom. */\n      :host > ::slotted(h2:last-child) {\n        margin-bottom: 24px;\n        @apply --paper-dialog-title;\n      }\n\n      :host > ::slotted(.paper-dialog-buttons),\n      :host > ::slotted(.buttons) {\n        position: relative;\n        padding: 8px 8px 8px 24px;\n        margin: 0;\n\n        color: var(--paper-dialog-button-color, var(--primary-color));\n\n        @apply --layout-horizontal;\n        @apply --layout-end-justified;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n/*\n  Fixes issue with not using shadow dom properly in iron-overlay-behavior/icon-focusables-helper.js\n*/\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\n\nimport { IronFocusablesHelper } from \"@polymer/iron-overlay-behavior/iron-focusables-helper.js\";\n\nexport const HaIronFocusablesHelper = {\n  /**\n   * Returns a sorted array of tabbable nodes, including the root node.\n   * It searches the tabbable nodes in the light and shadow dom of the chidren,\n   * sorting the result by tabindex.\n   * @param {!Node} node\n   * @return {!Array<!HTMLElement>}\n   */\n  getTabbableNodes: function(node) {\n    var result = [];\n    // If there is at least one element with tabindex > 0, we need to sort\n    // the final array by tabindex.\n    var needsSortByTabIndex = this._collectTabbableNodes(node, result);\n    if (needsSortByTabIndex) {\n      return IronFocusablesHelper._sortByTabIndex(result);\n    }\n    return result;\n  },\n\n  /**\n   * Searches for nodes that are tabbable and adds them to the `result` array.\n   * Returns if the `result` array needs to be sorted by tabindex.\n   * @param {!Node} node The starting point for the search; added to `result`\n   * if tabbable.\n   * @param {!Array<!HTMLElement>} result\n   * @return {boolean}\n   * @private\n   */\n  _collectTabbableNodes: function(node, result) {\n    // If not an element or not visible, no need to explore children.\n    if (\n      node.nodeType !== Node.ELEMENT_NODE ||\n      !IronFocusablesHelper._isVisible(node)\n    ) {\n      return false;\n    }\n    var element = /** @type {!HTMLElement} */ (node);\n    var tabIndex = IronFocusablesHelper._normalizedTabIndex(element);\n    var needsSort = tabIndex > 0;\n    if (tabIndex >= 0) {\n      result.push(element);\n    }\n\n    // In ShadowDOM v1, tab order is affected by the order of distrubution.\n    // E.g. getTabbableNodes(#root) in ShadowDOM v1 should return [#A, #B];\n    // in ShadowDOM v0 tab order is not affected by the distrubution order,\n    // in fact getTabbableNodes(#root) returns [#B, #A].\n    //  <div id=\"root\">\n    //   <!-- shadow -->\n    //     <slot name=\"a\">\n    //     <slot name=\"b\">\n    //   <!-- /shadow -->\n    //   <input id=\"A\" slot=\"a\">\n    //   <input id=\"B\" slot=\"b\" tabindex=\"1\">\n    //  </div>\n    // TODO(valdrin) support ShadowDOM v1 when upgrading to Polymer v2.0.\n    var children;\n    if (element.localName === \"content\" || element.localName === \"slot\") {\n      children = dom(element).getDistributedNodes();\n    } else {\n      // /////////////////////////\n      // Use shadow root if possible, will check for distributed nodes.\n      // THIS IS THE CHANGED LINE\n      children = dom(element.shadowRoot || element.root || element).children;\n      // /////////////////////////\n    }\n    for (var i = 0; i < children.length; i++) {\n      // Ensure method is always invoked to collect tabbable children.\n      needsSort = this._collectTabbableNodes(children[i], result) || needsSort;\n    }\n    return needsSort;\n  },\n};\n","import \"@polymer/paper-dialog/paper-dialog\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class\";\nimport { HaIronFocusablesHelper } from \"./ha-iron-focusables-helper.js\";\n// tslint:disable-next-line\nimport { PaperDialogElement } from \"@polymer/paper-dialog/paper-dialog\";\n\nconst paperDialogClass = customElements.get(\"paper-dialog\");\n\n// behavior that will override existing iron-overlay-behavior and call the fixed implementation\nconst haTabFixBehaviorImpl = {\n  get _focusableNodes() {\n    return HaIronFocusablesHelper.getTabbableNodes(this);\n  },\n};\n\n// paper-dialog that uses the haTabFixBehaviorImpl behvaior\n// export class HaPaperDialog extends paperDialogClass {}\n// @ts-ignore\nexport class HaPaperDialog\n  extends mixinBehaviors([haTabFixBehaviorImpl], paperDialogClass)\n  implements PaperDialogElement {}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-paper-dialog\": HaPaperDialog;\n  }\n}\ncustomElements.define(\"ha-paper-dialog\", HaPaperDialog);\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/paper-dialog-behavior/paper-dialog-shared-styles.js';\n\nimport {NeonAnimationRunnerBehavior} from '@polymer/neon-animation/neon-animation-runner-behavior.js';\nimport {PaperDialogBehavior} from '@polymer/paper-dialog-behavior/paper-dialog-behavior.js';\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\n/**\nMaterial design:\n[Dialogs](https://www.google.com/design/spec/components/dialogs.html)\n\n`<paper-dialog>` is a dialog with Material Design styling and optional\nanimations when it is opened or closed. It provides styles for a header, content\narea, and an action area for buttons. You can use the\n`<paper-dialog-scrollable>` element (in its own repository) if you need a\nscrolling content area. To autofocus a specific child element after opening the\ndialog, give it the `autofocus` attribute. See `Polymer.PaperDialogBehavior` and\n`Polymer.IronOverlayBehavior` for specifics.\n\nFor example, the following code implements a dialog with a header, scrolling\ncontent area and buttons. Focus will be given to the `dialog-confirm` button\nwhen the dialog is opened.\n\n    <paper-dialog>\n      <h2>Header</h2>\n      <paper-dialog-scrollable>\n        Lorem ipsum...\n      </paper-dialog-scrollable>\n      <div class=\"buttons\">\n        <paper-button dialog-dismiss>Cancel</paper-button>\n        <paper-button dialog-confirm autofocus>Accept</paper-button>\n      </div>\n    </paper-dialog>\n\n### Styling\n\nSee the docs for `Polymer.PaperDialogBehavior` for the custom properties\navailable for styling this element.\n\n### Animations\n\nSet the `entry-animation` and/or `exit-animation` attributes to add an animation\nwhen the dialog is opened or closed. See the documentation in\n[PolymerElements/neon-animation](https://github.com/PolymerElements/neon-animation)\nfor more info.\n\nFor example:\n\n    <script type=\"module\">\n      import '@polymer/neon-animation/animations/fade-out-animation.js';\n      import '@polymer/neon-animation/animations/scale-up-animation.js';\n    </script>\n\n    <paper-dialog entry-animation=\"scale-up-animation\"\n                  exit-animation=\"fade-out-animation\">\n      <h2>Header</h2>\n      <div>Dialog body</div>\n    </paper-dialog>\n\n### Accessibility\n\nSee the docs for `Polymer.PaperDialogBehavior` for accessibility features\nimplemented by this element.\n\n@group Paper Elements\n@element paper-dialog\n@hero hero.svg\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style include=\"paper-dialog-shared-styles\"></style>\n    <slot></slot>\n`,\n\n  is: 'paper-dialog',\n  behaviors: [PaperDialogBehavior, NeonAnimationRunnerBehavior],\n  listeners: {'neon-animation-finish': '_onNeonAnimationFinish'},\n\n  _renderOpened: function() {\n    this.cancelAnimation();\n    this.playAnimation('entry');\n  },\n\n  _renderClosed: function() {\n    this.cancelAnimation();\n    this.playAnimation('exit');\n  },\n\n  _onNeonAnimationFinish: function() {\n    if (this.opened) {\n      this._finishRenderOpened();\n    } else {\n      this._finishRenderClosed();\n    }\n  }\n});\n","interface LoadedCodeMirror {\n  codeMirror: any;\n  codeMirrorCss: any;\n}\n\nlet loaded: Promise<LoadedCodeMirror>;\n\nexport const loadCodeMirror = async (): Promise<LoadedCodeMirror> => {\n  if (!loaded) {\n    loaded = import(/* webpackChunkName: \"codemirror\" */ \"./codemirror\");\n  }\n  return loaded;\n};\n","import { loadCodeMirror } from \"../resources/codemirror.ondemand\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport {\n  UpdatingElement,\n  property,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\nimport { Editor } from \"codemirror\";\n\ndeclare global {\n  interface HASSDomEvents {\n    \"editor-save\": undefined;\n  }\n}\n\n@customElement(\"ha-code-editor\")\nexport class HaCodeEditor extends UpdatingElement {\n  public codemirror?: Editor;\n  @property() public mode?: string;\n  @property() public autofocus = false;\n  @property() public rtl = false;\n  @property() public error = false;\n  @property() private _value = \"\";\n\n  public set value(value: string) {\n    this._value = value;\n  }\n\n  public get value(): string {\n    return this.codemirror ? this.codemirror.getValue() : this._value;\n  }\n\n  public get hasComments(): boolean {\n    return this.shadowRoot!.querySelector(\"span.cm-comment\") ? true : false;\n  }\n\n  public connectedCallback() {\n    super.connectedCallback();\n    if (!this.codemirror) {\n      return;\n    }\n    this.codemirror.refresh();\n    if (this.autofocus !== false) {\n      this.codemirror.focus();\n    }\n  }\n\n  protected update(changedProps: PropertyValues): void {\n    super.update(changedProps);\n\n    if (!this.codemirror) {\n      return;\n    }\n\n    if (changedProps.has(\"mode\")) {\n      this.codemirror.setOption(\"mode\", this.mode);\n    }\n    if (changedProps.has(\"autofocus\")) {\n      this.codemirror.setOption(\"autofocus\", this.autofocus !== false);\n    }\n    if (changedProps.has(\"_value\") && this._value !== this.value) {\n      this.codemirror.setValue(this._value);\n    }\n    if (changedProps.has(\"rtl\")) {\n      this.codemirror.setOption(\"gutters\", this._calcGutters());\n      this._setScrollBarDirection();\n    }\n    if (changedProps.has(\"error\")) {\n      this.classList.toggle(\"error-state\", this.error);\n    }\n  }\n\n  protected firstUpdated(changedProps: PropertyValues): void {\n    super.firstUpdated(changedProps);\n    this._load();\n  }\n\n  private async _load(): Promise<void> {\n    const loaded = await loadCodeMirror();\n\n    const codeMirror = loaded.codeMirror;\n\n    const shadowRoot = this.attachShadow({ mode: \"open\" });\n\n    shadowRoot!.innerHTML = `\n    <style>\n      ${loaded.codeMirrorCss}\n      .CodeMirror {\n        height: var(--code-mirror-height, auto);\n        direction: var(--code-mirror-direction, ltr);\n      }\n      .CodeMirror-scroll {\n        max-height: var(--code-mirror-max-height, --code-mirror-height);\n      }\n      .CodeMirror-gutters {\n        border-right: 1px solid var(--paper-input-container-color, var(--secondary-text-color));\n        background-color: var(--paper-dialog-background-color, var(--primary-background-color));\n        transition: 0.2s ease border-right;\n      }\n      :host(.error-state) .CodeMirror-gutters {\n        border-color: var(--error-state-color, red);\n      }\n      .CodeMirror-focused .CodeMirror-gutters {\n        border-right: 2px solid var(--paper-input-container-focus-color, var(--primary-color));\n      }\n      .CodeMirror-linenumber {\n        color: var(--paper-dialog-color, var(--primary-text-color));\n      }\n      .rtl .CodeMirror-vscrollbar {\n        right: auto;\n        left: 0px;\n      }\n      .rtl-gutter {\n        width: 20px;\n      }\n    </style>`;\n\n    this.codemirror = codeMirror(shadowRoot, {\n      value: this._value,\n      lineNumbers: true,\n      tabSize: 2,\n      mode: this.mode,\n      autofocus: this.autofocus !== false,\n      viewportMargin: Infinity,\n      extraKeys: {\n        Tab: \"indentMore\",\n        \"Shift-Tab\": \"indentLess\",\n      },\n      gutters: this._calcGutters(),\n    });\n    this._setScrollBarDirection();\n    this.codemirror!.on(\"changes\", () => this._onChange());\n  }\n\n  private _onChange(): void {\n    const newValue = this.value;\n    if (newValue === this._value) {\n      return;\n    }\n    this._value = newValue;\n    fireEvent(this, \"value-changed\", { value: this._value });\n  }\n\n  private _calcGutters(): string[] {\n    return this.rtl ? [\"rtl-gutter\", \"CodeMirror-linenumbers\"] : [];\n  }\n\n  private _setScrollBarDirection(): void {\n    if (this.codemirror) {\n      this.codemirror.getWrapperElement().classList.toggle(\"rtl\", this.rtl);\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-code-editor\": HaCodeEditor;\n  }\n}\n","import { safeDump, safeLoad } from \"js-yaml\";\nimport \"./ha-code-editor\";\nimport { LitElement, property, customElement, html, query } from \"lit-element\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { afterNextRender } from \"../common/util/render-status\";\n// tslint:disable-next-line\nimport { HaCodeEditor } from \"./ha-code-editor\";\n\ndeclare global {\n  // for fire event\n  interface HASSDomEvents {\n    \"editor-refreshed\": undefined;\n  }\n}\n\nconst isEmpty = (obj: object) => {\n  if (typeof obj !== \"object\") {\n    return false;\n  }\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n@customElement(\"ha-yaml-editor\")\nexport class HaYamlEditor extends LitElement {\n  @property() public value?: any;\n  @property() public defaultValue?: any;\n  @property() public isValid = true;\n  @property() public label?: string;\n  @property() private _yaml: string = \"\";\n  @query(\"ha-code-editor\") private _editor?: HaCodeEditor;\n\n  public setValue(value) {\n    try {\n      this._yaml = value && !isEmpty(value) ? safeDump(value) : \"\";\n    } catch (err) {\n      alert(`There was an error converting to YAML: ${err}`);\n    }\n    afterNextRender(() => {\n      if (this._editor?.codemirror) {\n        this._editor.codemirror.refresh();\n      }\n      afterNextRender(() => fireEvent(this, \"editor-refreshed\"));\n    });\n  }\n\n  protected firstUpdated() {\n    if (this.defaultValue) {\n      this.setValue(this.defaultValue);\n    }\n  }\n\n  protected render() {\n    if (this._yaml === undefined) {\n      return;\n    }\n    return html`\n      ${this.label\n        ? html`\n            <p>${this.label}</p>\n          `\n        : \"\"}\n      <ha-code-editor\n        .value=${this._yaml}\n        mode=\"yaml\"\n        .error=${this.isValid === false}\n        @value-changed=${this._onChange}\n      ></ha-code-editor>\n    `;\n  }\n\n  private _onChange(ev: CustomEvent) {\n    ev.stopPropagation();\n    const value = ev.detail.value;\n    let parsed;\n    let isValid = true;\n\n    if (value) {\n      try {\n        parsed = safeLoad(value);\n      } catch (err) {\n        // Invalid YAML\n        isValid = false;\n      }\n    } else {\n      parsed = {};\n    }\n\n    this.value = parsed;\n    this.isValid = isValid;\n\n    fireEvent(this, \"value-changed\", { value: parsed, isValid } as any);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-yaml-editor\": HaYamlEditor;\n  }\n}\n","import {\n  html,\n  css,\n  LitElement,\n  TemplateResult,\n  CSSResult,\n  customElement,\n  property,\n  query,\n} from \"lit-element\";\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport \"../../../components/dialog/ha-paper-dialog\";\nimport \"../../../components/ha-switch\";\nimport \"../../../components/ha-yaml-editor\";\n// tslint:disable-next-line:no-duplicate-imports\nimport { HaPaperDialog } from \"../../../components/dialog/ha-paper-dialog\";\nimport \"@material/mwc-button\";\n\nimport { haStyleDialog } from \"../../../resources/styles\";\nimport { HomeAssistant } from \"../../../types\";\nimport { SaveDialogParams } from \"./show-save-config-dialog\";\nimport { PolymerChangedEvent } from \"../../../polymer-types\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\n\nconst EMPTY_CONFIG = { views: [] };\n\n@customElement(\"hui-dialog-save-config\")\nexport class HuiSaveConfig extends LitElement {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _params?: SaveDialogParams;\n  @property() private _emptyConfig = false;\n\n  @property() private _saving: boolean;\n  @query(\"ha-paper-dialog\") private _dialog?: HaPaperDialog;\n\n  public constructor() {\n    super();\n    this._saving = false;\n  }\n\n  public async showDialog(params: SaveDialogParams): Promise<void> {\n    this._params = params;\n    this._emptyConfig = false;\n    await this.updateComplete;\n    this._dialog!.open();\n  }\n\n  protected render(): TemplateResult {\n    if (!this._params) {\n      return html``;\n    }\n    return html`\n      <ha-paper-dialog\n        with-backdrop\n        opened\n        @opened-changed=${this._openedChanged}\n      >\n        <h2>\n          ${this.hass!.localize(\"ui.panel.lovelace.editor.save_config.header\")}\n        </h2>\n        <paper-dialog-scrollable>\n          <p>\n            ${this.hass!.localize(\"ui.panel.lovelace.editor.save_config.para\")}\n          </p>\n\n          ${this._params.mode === \"storage\"\n            ? html`\n                <p>\n                  ${this.hass!.localize(\n                    \"ui.panel.lovelace.editor.save_config.para_sure\"\n                  )}\n                </p>\n                <ha-switch\n                  .checked=${this._emptyConfig}\n                  @change=${this._emptyConfigChanged}\n                  >${this.hass!.localize(\n                    \"ui.panel.lovelace.editor.save_config.empty_config\"\n                  )}</ha-switch\n                >\n              `\n            : html`\n                <p>\n                  ${this.hass!.localize(\n                    \"ui.panel.lovelace.editor.save_config.yaml_mode\"\n                  )}\n                </p>\n                <p>\n                  ${this.hass!.localize(\n                    \"ui.panel.lovelace.editor.save_config.yaml_control\"\n                  )}\n                </p>\n                <p>\n                  ${this.hass!.localize(\n                    \"ui.panel.lovelace.editor.save_config.yaml_config\"\n                  )}\n                </p>\n                <ha-yaml-editor\n                  .defaultValue=${this._params!.lovelace.config}\n                  @editor-refreshed=${this._editorRefreshed}\n                ></ha-yaml-editor>\n              `}\n        </paper-dialog-scrollable>\n        <div class=\"paper-dialog-buttons\">\n          ${this._params.mode === \"storage\"\n            ? html`\n                <mwc-button @click=\"${this._closeDialog}\"\n                  >${this.hass!.localize(\n                    \"ui.panel.lovelace.editor.save_config.cancel\"\n                  )}\n                </mwc-button>\n                <mwc-button\n                  ?disabled=\"${this._saving}\"\n                  @click=\"${this._saveConfig}\"\n                >\n                  <paper-spinner\n                    ?active=\"${this._saving}\"\n                    alt=\"Saving\"\n                  ></paper-spinner>\n                  ${this.hass!.localize(\n                    \"ui.panel.lovelace.editor.save_config.save\"\n                  )}\n                </mwc-button>\n              `\n            : html`\n                <mwc-button @click=${this._closeDialog}\n                  >${this.hass!.localize(\n                    \"ui.panel.lovelace.editor.save_config.close\"\n                  )}\n                </mwc-button>\n              `}\n        </div>\n      </ha-paper-dialog>\n    `;\n  }\n\n  private _closeDialog(): void {\n    this._dialog!.close();\n  }\n\n  private _openedChanged(ev: PolymerChangedEvent<boolean>): void {\n    if (!ev.detail.value) {\n      this._params = undefined;\n    }\n  }\n\n  private _editorRefreshed() {\n    fireEvent(this._dialog! as HTMLElement, \"iron-resize\");\n  }\n\n  private _emptyConfigChanged(ev) {\n    this._emptyConfig = ev.target.checked;\n  }\n\n  private async _saveConfig(): Promise<void> {\n    if (!this.hass || !this._params) {\n      return;\n    }\n    this._saving = true;\n    try {\n      const lovelace = this._params!.lovelace;\n      await lovelace.saveConfig(\n        this._emptyConfig ? EMPTY_CONFIG : lovelace.config\n      );\n      lovelace.setEditMode(true);\n      this._saving = false;\n      this._closeDialog();\n    } catch (err) {\n      alert(`Saving failed: ${err.message}`);\n      this._saving = false;\n    }\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      haStyleDialog,\n      css`\n        @media all and (max-width: 450px), all and (max-height: 500px) {\n          /* overrule the ha-style-dialog max-height on small screens */\n          ha-paper-dialog {\n            max-height: 100%;\n            height: 100%;\n          }\n        }\n        @media all and (min-width: 660px) {\n          ha-paper-dialog {\n            width: 650px;\n          }\n        }\n        ha-paper-dialog {\n          max-width: 650px;\n        }\n        paper-spinner {\n          display: none;\n        }\n        paper-spinner[active] {\n          display: block;\n        }\n        mwc-button paper-spinner {\n          width: 14px;\n          height: 14px;\n          margin-right: 20px;\n        }\n        ha-switch {\n          padding-bottom: 16px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-dialog-save-config\": HuiSaveConfig;\n  }\n}\n"],"sourceRoot":""}