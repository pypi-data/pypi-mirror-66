(self.webpackJsonp=self.webpackJsonp||[]).push([[15],{442:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=function(e){var t=parseFloat(e);if(isNaN(t))throw new Error("".concat(e," is not a number"));return t};function i(e){if(!e)return null;try{if(e.endsWith("%"))return{w:100,h:n(e.substr(0,e.length-1))};var t=e.replace(":","x").split("x");return 0===t.length?null:1===t.length?{w:n(t[0]),h:1}:{w:n(t[0]),h:n(t[1])}}catch(r){}return null}},471:function(e,t,r){"use strict";function n(e,t,r,n,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,i)}var i=function(){var e,t=(e=regeneratorRuntime.mark(function e(t,r,n,i,a){var o,s,c,u,l,d,f=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o=f.length,s=new Array(o>5?o-5:0),c=5;c<o;c++)s[c-5]=f[c];if((u=i[t])||(u=i[t]={}),!(l=u[a])){e.next=6;break}return e.abrupt("return",l);case 6:return d=n.apply(void 0,[i,a].concat(s)),u[a]=d,d.then(function(){return setTimeout(function(){u[a]=void 0},r)},function(){u[a]=void 0}),e.abrupt("return",d);case 10:case"end":return e.stop()}},e)}),function(){var t=this,r=arguments;return new Promise(function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,c,"next",e)}function c(e){n(o,i,a,s,c,"throw",e)}s(void 0)})});return function(e,r,n,i,a){return t.apply(this,arguments)}}(),a=r(71);function o(e,t,r,n,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,i)}function s(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function s(e){o(a,n,i,s,c,"next",e)}function c(e){o(a,n,i,s,c,"throw",e)}s(void 0)})}}r.d(t,"a",function(){return c}),r.d(t,"b",function(){return u}),r.d(t,"e",function(){return l}),r.d(t,"d",function(){return f}),r.d(t,"c",function(){return p}),r.d(t,"f",function(){return h});var c=2,u=function(e){return"/api/camera_proxy_stream/".concat(e.entity_id,"?token=").concat(e.attributes.access_token)},l=function(e,t){return i("_cameraTmbUrl",9e3,d,e,t)},d=function(){var e=s(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.c)(t,"/api/camera_proxy/".concat(r));case 2:return n=e.sent,e.abrupt("return",t.hassUrl(n.path));case 4:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}(),f=function(){var e=s(regeneratorRuntime.mark(function e(t,r,n){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={type:"camera/stream",entity_id:r},n&&(i.format=n),e.next=4,t.callWS(i);case 4:return(a=e.sent).url=t.hassUrl(a.url),e.abrupt("return",a);case 7:case"end":return e.stop()}},e)}));return function(t,r,n){return e.apply(this,arguments)}}(),p=function(e,t){return e.callWS({type:"camera/get_prefs",entity_id:t})},h=function(e,t,r){return e.callWS(Object.assign({type:"camera/update_prefs",entity_id:t},r))}},520:function(e,t,r){"use strict";var n=r(191),i=r(442),a=r(0),o=r(223),s=r(70),c=r(471);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){var e=v(['\n      img {\n        display: block;\n        height: auto;\n        transition: filter 0.2s linear;\n        width: 100%;\n      }\n\n      .ratio {\n        position: relative;\n        width: 100%;\n        height: 0;\n      }\n\n      .ratio img,\n      .ratio div {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n\n      #brokenImage {\n        background: grey url("/static/images/image-broken.svg") center/36px\n          no-repeat;\n      }\n    ']);return l=function(){return e},e}function d(e,t,r,n,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,i)}function f(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){d(a,n,i,o,s,"next",e)}function s(e){d(a,n,i,o,s,"throw",e)}o(void 0)})}}function p(){var e=v(['\n              <img\n                id="image"\n                src=',"\n                @error=","\n                @load=","\n                style=","\n              />\n            "]);return p=function(){return e},e}function h(){var e=v(["\n              <ha-camera-stream\n                .hass=",'\n                .stateObj="','"\n              ></ha-camera-stream>\n            ']);return h=function(){return e},e}function m(){var e=v(["\n      <div\n        style=","\n        class=","\n      >\n        ",'\n        <div\n          id="brokenImage"\n          style=',"\n        ></div>\n      </div>\n    "]);return m=function(){return e},e}function v(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t,r=O(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var n={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(n.decorators=e.decorators),"field"===e.kind&&(n.initializer=e.value),n}function k(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function w(e){return e.decorators&&e.decorators.length}function E(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function _(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function O(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}function j(e,t,r){return(j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function(e,t,r,n){var i=function(){var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach(function(r){t.forEach(function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)},this)},this)},initializeClassElements:function(e,t){var r=e.prototype;["method","field"].forEach(function(n){t.forEach(function(t){var i=t.placement;if(t.kind===n&&("static"===i||"prototype"===i)){var a="static"===i?e:r;this.defineClassElement(a,t)}},this)},this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var n=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===n?void 0:n.call(e)}}Object.defineProperty(e,t.key,r)},decorateClass:function(e,t){var r=[],n=[],i={static:[],prototype:[],own:[]};if(e.forEach(function(e){this.addElementPlacement(e,i)},this),e.forEach(function(e){if(!w(e))return r.push(e);var t=this.decorateElement(e,i);r.push(t.element),r.push.apply(r,t.extras),n.push.apply(n,t.finishers)},this),!t)return{elements:r,finishers:n};var a=this.decorateConstructor(r,t);return n.push.apply(n,a.finishers),a.finishers=n,a},addElementPlacement:function(e,t,r){var n=t[e.placement];if(!r&&-1!==n.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");n.push(e.key)},decorateElement:function(e,t){for(var r=[],n=[],i=e.decorators,a=i.length-1;a>=0;a--){var o=t[e.placement];o.splice(o.indexOf(e.key),1);var s=this.fromElementDescriptor(e),c=this.toElementFinisherExtras((0,i[a])(s)||s);e=c.element,this.addElementPlacement(e,t),c.finisher&&n.push(c.finisher);var u=c.extras;if(u){for(var l=0;l<u.length;l++)this.addElementPlacement(u[l],t);r.push.apply(r,u)}}return{element:e,finishers:n,extras:r}},decorateConstructor:function(e,t){for(var r=[],n=t.length-1;n>=0;n--){var i=this.fromClassDescriptor(e),a=this.toClassDescriptor((0,t[n])(i)||i);if(void 0!==a.finisher&&r.push(a.finisher),void 0!==a.elements){e=a.elements;for(var o=0;o<e.length-1;o++)for(var s=o+1;s<e.length;s++)if(e[o].key===e[s].key&&e[o].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[o].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,function(e){if(Array.isArray(e))return e}(t)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()).map(function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t},this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=O(e.key),n=String(e.placement);if("static"!==n&&"prototype"!==n&&"own"!==n)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+n+'"');var i=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var a={kind:t,key:r,placement:n,descriptor:Object.assign({},i)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(i,"get","The property descriptor of a field descriptor"),this.disallowProperty(i,"set","The property descriptor of a field descriptor"),this.disallowProperty(i,"value","The property descriptor of a field descriptor"),a.initializer=e.initializer),a},toElementFinisherExtras:function(e){var t=this.toElementDescriptor(e),r=_(e,"finisher"),n=this.toElementDescriptors(e.extras);return{element:t,finisher:r,extras:n}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=_(e,"finisher"),n=this.toElementDescriptors(e.elements);return{elements:n,finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var n=(0,t[r])(e);if(void 0!==n){if("function"!=typeof n)throw new TypeError("Finishers must return a constructor.");e=n}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}();if(n)for(var a=0;a<n.length;a++)i=n[a](i);var o=t(function(e){i.initializeInstanceElements(e,s.elements)},r),s=i.decorateClass(function(e){for(var t=[],r=function(e){return"method"===e.kind&&e.key===a.key&&e.placement===a.placement},n=0;n<e.length;n++){var i,a=e[n];if("method"===a.kind&&(i=t.find(r)))if(E(a.descriptor)||E(i.descriptor)){if(w(a)||w(i))throw new ReferenceError("Duplicated methods ("+a.key+") can't be decorated.");i.descriptor=a.descriptor}else{if(w(a)){if(w(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+a.key+").");i.decorators=a.decorators}k(a,i)}else t.push(a)}return t}(o.d.map(b)),e);i.initializeClassElements(o.F,s.elements),i.runClassFinishers(o.F,s.finishers)}([Object(a.d)("hui-image")],function(e,t){var r=function(r){function n(){var t,r,i,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return i=this,r=!(a=(t=I(n)).call.apply(t,[this].concat(s)))||"object"!==u(a)&&"function"!=typeof a?y(i):a,e(y(r)),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(n,t),n}();return{F:r,d:[{kind:"field",decorators:[Object(a.g)()],key:"hass",value:void 0},{kind:"field",decorators:[Object(a.g)()],key:"entity",value:void 0},{kind:"field",decorators:[Object(a.g)()],key:"image",value:void 0},{kind:"field",decorators:[Object(a.g)()],key:"stateImage",value:void 0},{kind:"field",decorators:[Object(a.g)()],key:"cameraImage",value:void 0},{kind:"field",decorators:[Object(a.g)()],key:"cameraView",value:void 0},{kind:"field",decorators:[Object(a.g)()],key:"aspectRatio",value:void 0},{kind:"field",decorators:[Object(a.g)()],key:"filter",value:void 0},{kind:"field",decorators:[Object(a.g)()],key:"stateFilter",value:void 0},{kind:"field",decorators:[Object(a.g)()],key:"_loadError",value:void 0},{kind:"field",decorators:[Object(a.g)()],key:"_cameraImageSrc",value:void 0},{kind:"field",decorators:[Object(a.h)("img")],key:"_image",value:void 0},{kind:"field",key:"_lastImageHeight",value:void 0},{kind:"field",key:"_cameraUpdater",value:void 0},{kind:"field",key:"_attached",value:void 0},{kind:"method",key:"connectedCallback",value:function(){j(I(r.prototype),"connectedCallback",this).call(this),this._attached=!0,this.cameraImage&&"live"!==this.cameraView&&this._startUpdateCameraInterval()}},{kind:"method",key:"disconnectedCallback",value:function(){j(I(r.prototype),"disconnectedCallback",this).call(this),this._attached=!1,this._stopUpdateCameraInterval()}},{kind:"method",key:"render",value:function(){var e,t,r=this.aspectRatio?Object(i.a)(this.aspectRatio):null,c=this.hass&&this.entity?this.hass.states[this.entity]:void 0,u=c?c.state:"unavailable",l=!this.stateImage;if(this.cameraImage)"live"===this.cameraView?t=this.hass&&this.hass.states[this.cameraImage]:e=this._cameraImageSrc;else if(this.stateImage){var d=this.stateImage[u];d?e=d:(e=this.image,l=!0)}else e=this.image;e&&(e=this.hass.hassUrl(e));var f=this.filter||"";(this.stateFilter&&this.stateFilter[u]&&(f=this.stateFilter[u]),!f&&this.entity)&&(f=(!c||n.h.includes(u))&&l?"grayscale(100%)":"");return Object(a.f)(m(),Object(o.a)({paddingBottom:r&&r.w>0&&r.h>0?"".concat((100*r.h/r.w).toFixed(2),"%"):""}),Object(s.a)({ratio:Boolean(r&&r.w>0&&r.h>0)}),this.cameraImage&&"live"===this.cameraView?Object(a.f)(h(),this.hass,t):Object(a.f)(p(),e,this._onImageError,this._onImageLoad,Object(o.a)({filter:f,display:this._loadError?"none":"block"})),Object(o.a)({height:"".concat(this._lastImageHeight||"100","px"),display:this._loadError?"block":"none"}))}},{kind:"method",key:"updated",value:function(e){if(e.has("cameraImage")&&"live"!==this.cameraView)return this._updateCameraImageSrc(),void this._startUpdateCameraInterval()}},{kind:"method",key:"_startUpdateCameraInterval",value:function(){var e=this;this._stopUpdateCameraInterval(),this.cameraImage&&this._attached&&(this._cameraUpdater=window.setInterval(function(){return e._updateCameraImageSrc()},1e4))}},{kind:"method",key:"_stopUpdateCameraInterval",value:function(){this._cameraUpdater&&clearInterval(this._cameraUpdater)}},{kind:"method",key:"_onImageError",value:function(){this._loadError=!0}},{kind:"method",key:"_onImageLoad",value:function(){var e=f(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._loadError=!1,e.next=3,this.updateComplete;case 3:this._lastImageHeight=this._image.offsetHeight;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{kind:"method",key:"_updateCameraImageSrc",value:function(){var e=f(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hass&&this.cameraImage){e.next=2;break}return e.abrupt("return");case 2:if(this.hass.states[this.cameraImage]){e.next=6;break}return this._onImageError(),e.abrupt("return");case 6:return e.next=8,Object(c.e)(this.hass,this.cameraImage);case 8:this._cameraImageSrc=e.sent;case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{kind:"get",static:!0,key:"styles",value:function(){return Object(a.c)(l())}}]}},a.a)},71:function(e,t,r){"use strict";function n(e,t,r,n,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,i)}r.d(t,"d",function(){return i}),r.d(t,"c",function(){return a}),r.d(t,"b",function(){return o}),r.d(t,"a",function(){return s});var i="".concat(location.protocol,"//").concat(location.host),a=function(e,t){return e.callWS({type:"auth/sign_path",path:t})},o=function(){return fetch("/auth/providers",{credentials:"same-origin"})},s=function(){var e,t=(e=regeneratorRuntime.mark(function e(t,r,n,i){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.callWS({type:"config/auth_provider/homeassistant/create",user_id:r,username:n,password:i}));case 1:case"end":return e.stop()}},e)}),function(){var t=this,r=arguments;return new Promise(function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,c,"next",e)}function c(e){n(o,i,a,s,c,"throw",e)}s(void 0)})});return function(e,r,n,i){return t.apply(this,arguments)}}()}}]);
//# sourceMappingURL=chunk.c552f55e2a25d20112f5.js.map