{"version":3,"sources":["webpack:///./src/components/ha-switch.ts","webpack:///./src/components/ha-dialog.ts","webpack:///./src/panels/config/users/dialog-user-detail.ts"],"names":["MwcSwitch","customElements","get","_decorate","customElement","_initialize","_MwcSwitch","HaSwitch","[object Object]","args","super","this","F","d","kind","decorators","property","type","Boolean","key","value","query","_get","_getPrototypeOf","prototype","call","style","setProperty","classList","toggle","_slot","assignedNodes","length","addEventListener","haptic","forwardHaptic","html","ripple","interactionNode","_haChangeHandler","static","css","e","mdcFoundation","handleChange","checked","formElement","MwcDialog","createCloseHeading","hass","title","localize","_MwcDialog","_LitElement","async","params","_params","_error","undefined","_name","entry","name","_isAdmin","group_ids","SYSTEM_GROUP_ID_ADMIN","updateComplete","user","_close","id","is_owner","system_generated","is_active","_nameChanged","_adminChanged","_deleteEntry","_submitting","_updateEntry","ev","detail","target","updateEntry","trim","SYSTEM_GROUP_ID_USER","err","message","removeEntry","haStyleDialog","LitElement"],"mappings":"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","file":"chunk.b67c2b8dacd9cf352a4b.js","sourcesContent":["import {\n  customElement,\n  CSSResult,\n  css,\n  query,\n  html,\n  property,\n} from \"lit-element\";\nimport \"@material/mwc-switch\";\nimport { style } from \"@material/mwc-switch/mwc-switch-css\";\n// tslint:disable-next-line\nimport { Switch } from \"@material/mwc-switch\";\nimport { Constructor } from \"../types\";\nimport { forwardHaptic } from \"../data/haptics\";\nimport { ripple } from \"@material/mwc-ripple/ripple-directive\";\n// tslint:disable-next-line\nconst MwcSwitch = customElements.get(\"mwc-switch\") as Constructor<Switch>;\n\n@customElement(\"ha-switch\")\nexport class HaSwitch extends MwcSwitch {\n  // Generate a haptic vibration.\n  // Only set to true if the new value of the switch is applied right away when toggling.\n  // Do not add haptic when a user is required to press save.\n  @property({ type: Boolean }) public haptic = false;\n  @query(\"slot\") private _slot!: HTMLSlotElement;\n\n  protected firstUpdated() {\n    super.firstUpdated();\n    this.style.setProperty(\n      \"--mdc-theme-secondary\",\n      \"var(--switch-checked-color)\"\n    );\n    this.classList.toggle(\n      \"slotted\",\n      Boolean(this._slot.assignedNodes().length)\n    );\n    this.addEventListener(\"change\", () => {\n      if (this.haptic) {\n        forwardHaptic(\"light\");\n      }\n    });\n  }\n\n  protected render() {\n    return html`\n      <div class=\"mdc-switch\">\n        <div class=\"mdc-switch__track\"></div>\n        <div\n          class=\"mdc-switch__thumb-underlay\"\n          .ripple=\"${ripple({\n            interactionNode: this,\n          })}\"\n        >\n          <div class=\"mdc-switch__thumb\">\n            <input\n              type=\"checkbox\"\n              id=\"basic-switch\"\n              class=\"mdc-switch__native-control\"\n              role=\"switch\"\n              @change=\"${this._haChangeHandler}\"\n            />\n          </div>\n        </div>\n      </div>\n      <label for=\"basic-switch\"><slot></slot></label>\n    `;\n  }\n\n  protected static get styles(): CSSResult[] {\n    return [\n      style,\n      css`\n        :host {\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n        }\n        .mdc-switch.mdc-switch--checked .mdc-switch__thumb {\n          background-color: var(--switch-checked-button-color);\n          border-color: var(--switch-checked-button-color);\n        }\n        .mdc-switch.mdc-switch--checked .mdc-switch__track {\n          background-color: var(--switch-checked-track-color);\n          border-color: var(--switch-checked-track-color);\n        }\n        .mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb {\n          background-color: var(--switch-unchecked-button-color);\n          border-color: var(--switch-unchecked-button-color);\n        }\n        .mdc-switch:not(.mdc-switch--checked) .mdc-switch__track {\n          background-color: var(--switch-unchecked-track-color);\n          border-color: var(--switch-unchecked-track-color);\n        }\n        :host(.slotted) .mdc-switch {\n          margin-right: 24px;\n        }\n      `,\n    ];\n  }\n\n  private _haChangeHandler(e: Event) {\n    this.mdcFoundation.handleChange(e);\n    // catch \"click\" event and sync properties\n    this.checked = this.formElement.checked;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-switch\": HaSwitch;\n  }\n}\n","import { customElement, CSSResult, css, html } from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@material/mwc-dialog\";\nimport { style } from \"@material/mwc-dialog/mwc-dialog-css\";\n// tslint:disable-next-line\nimport { Dialog } from \"@material/mwc-dialog\";\nimport { Constructor, HomeAssistant } from \"../types\";\n// tslint:disable-next-line\nconst MwcDialog = customElements.get(\"mwc-dialog\") as Constructor<Dialog>;\n\nexport const createCloseHeading = (hass: HomeAssistant, title: string) => html`\n  ${title}\n  <paper-icon-button\n    aria-label=${hass.localize(\"ui.dialogs.generic.close\")}\n    icon=\"hass:close\"\n    dialogAction=\"close\"\n    class=\"close_button\"\n  ></paper-icon-button>\n`;\n\n@customElement(\"ha-dialog\")\nexport class HaDialog extends MwcDialog {\n  protected static get styles(): CSSResult[] {\n    return [\n      style,\n      css`\n        .mdc-dialog__actions {\n          justify-content: var(--justify-action-buttons, flex-end);\n        }\n        .mdc-dialog__container {\n          align-items: var(--vertial-align-dialog, center);\n        }\n        .mdc-dialog__title::before {\n          display: block;\n          height: 20px;\n        }\n        .close_button {\n          position: absolute;\n          right: 16px;\n          top: 12px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-dialog\": HaDialog;\n  }\n}\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-input/paper-input\";\nimport \"@polymer/paper-tooltip/paper-tooltip\";\nimport {\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n  css,\n} from \"lit-element\";\nimport { PolymerChangedEvent } from \"../../../polymer-types\";\nimport { haStyleDialog } from \"../../../resources/styles\";\nimport { HomeAssistant } from \"../../../types\";\nimport { UserDetailDialogParams } from \"./show-dialog-user-detail\";\nimport \"../../../components/ha-switch\";\nimport { createCloseHeading } from \"../../../components/ha-dialog\";\nimport {\n  SYSTEM_GROUP_ID_ADMIN,\n  SYSTEM_GROUP_ID_USER,\n} from \"../../../data/user\";\n\n@customElement(\"dialog-user-detail\")\nclass DialogUserDetail extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() private _name!: string;\n  @property() private _isAdmin?: boolean;\n  @property() private _error?: string;\n  @property() private _params?: UserDetailDialogParams;\n  @property() private _submitting: boolean = false;\n\n  public async showDialog(params: UserDetailDialogParams): Promise<void> {\n    this._params = params;\n    this._error = undefined;\n    this._name = params.entry.name || \"\";\n    this._isAdmin = params.entry.group_ids[0] === SYSTEM_GROUP_ID_ADMIN;\n    await this.updateComplete;\n  }\n\n  protected render(): TemplateResult {\n    if (!this._params) {\n      return html``;\n    }\n    const user = this._params.entry;\n    return html`\n      <ha-dialog\n        open\n        @closing=${this._close}\n        scrimClickAction\n        escapeKeyAction\n        .heading=${createCloseHeading(this.hass, user.name)}\n      >\n        <div>\n          ${this._error\n            ? html`\n                <div class=\"error\">${this._error}</div>\n              `\n            : \"\"}\n          <div class=\"secondary\">\n            ${this.hass.localize(\"ui.panel.config.users.editor.id\")}: ${user.id}\n          </div>\n          <div>\n            ${user.is_owner\n              ? html`\n                  <span class=\"state\"\n                    >${this.hass.localize(\n                      \"ui.panel.config.users.editor.owner\"\n                    )}</span\n                  >\n                `\n              : \"\"}\n            ${user.system_generated\n              ? html`\n                  <span class=\"state\">\n                    ${this.hass.localize(\n                      \"ui.panel.config.users.editor.system_generated\"\n                    )}\n                  </span>\n                `\n              : \"\"}\n            ${user.is_active\n              ? html`\n                  <span class=\"state\"\n                    >${this.hass.localize(\n                      \"ui.panel.config.users.editor.active\"\n                    )}</span\n                  >\n                `\n              : \"\"}\n          </div>\n          <div class=\"form\">\n            <paper-input\n              .value=${this._name}\n              .disabled=${user.system_generated}\n              @value-changed=${this._nameChanged}\n              label=\"${this.hass!.localize(\n                \"ui.panel.config.users.editor.name\"\n              )}\"\n            ></paper-input>\n            <ha-switch\n              .disabled=${user.system_generated}\n              .checked=${this._isAdmin}\n              @change=${this._adminChanged}\n            >\n              ${this.hass.localize(\"ui.panel.config.users.editor.admin\")}\n            </ha-switch>\n            ${!this._isAdmin\n              ? html`\n                  <br />\n                  The users group is a work in progress. The user will be unable\n                  to administer the instance via the UI. We're still auditing\n                  all management API endpoints to ensure that they correctly\n                  limit access to administrators.\n                `\n              : \"\"}\n          </div>\n        </div>\n\n        <div slot=\"secondaryAction\">\n          <mwc-button\n            class=\"warning\"\n            @click=${this._deleteEntry}\n            .disabled=${this._submitting || user.system_generated}\n          >\n            ${this.hass!.localize(\"ui.panel.config.users.editor.delete_user\")}\n          </mwc-button>\n          ${user.system_generated\n            ? html`\n                <paper-tooltip position=\"right\">\n                  ${this.hass.localize(\n                    \"ui.panel.config.users.editor.system_generated_users_not_removable\"\n                  )}\n                </paper-tooltip>\n              `\n            : \"\"}\n        </div>\n        <div slot=\"primaryAction\">\n          <mwc-button\n            @click=${this._updateEntry}\n            .disabled=${!this._name ||\n              this._submitting ||\n              user.system_generated}\n          >\n            ${this.hass!.localize(\"ui.panel.config.users.editor.update_user\")}\n          </mwc-button>\n          ${user.system_generated\n            ? html`\n                <paper-tooltip position=\"left\">\n                  ${this.hass.localize(\n                    \"ui.panel.config.users.editor.system_generated_users_not_editable\"\n                  )}\n                </paper-tooltip>\n              `\n            : \"\"}\n        </div>\n      </ha-dialog>\n    `;\n  }\n\n  private _nameChanged(ev: PolymerChangedEvent<string>) {\n    this._error = undefined;\n    this._name = ev.detail.value;\n  }\n\n  private async _adminChanged(ev): Promise<void> {\n    this._isAdmin = ev.target.checked;\n  }\n\n  private async _updateEntry() {\n    this._submitting = true;\n    try {\n      await this._params!.updateEntry({\n        name: this._name.trim(),\n        group_ids: [\n          this._isAdmin ? SYSTEM_GROUP_ID_ADMIN : SYSTEM_GROUP_ID_USER,\n        ],\n      });\n      this._close();\n    } catch (err) {\n      this._error = err?.message || \"Unknown error\";\n    } finally {\n      this._submitting = false;\n    }\n  }\n\n  private async _deleteEntry() {\n    this._submitting = true;\n    try {\n      if (await this._params!.removeEntry()) {\n        this._params = undefined;\n      }\n    } finally {\n      this._submitting = false;\n    }\n  }\n\n  private _close(): void {\n    this._params = undefined;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      haStyleDialog,\n      css`\n        ha-dialog {\n          --mdc-dialog-max-width: 500px;\n        }\n        .form {\n          padding-top: 16px;\n        }\n        .secondary {\n          color: var(--secondary-text-color);\n        }\n        .state {\n          background-color: rgba(var(--rgb-primary-text-color), 0.15);\n          border-radius: 16px;\n          padding: 4px 8px;\n          margin-top: 8px;\n          display: inline-block;\n        }\n        .state:not(:first-child) {\n          margin-left: 8px;\n        }\n        ha-switch {\n          margin-top: 8px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"dialog-user-detail\": DialogUserDetail;\n  }\n}\n"],"sourceRoot":""}