{"version":3,"sources":["webpack:///./src/components/ha-dialog.ts","webpack:///./src/panels/config/lovelace/resources/dialog-lovelace-resource-detail.ts"],"names":["MwcDialog","customElements","get","createCloseHeading","hass","title","html","_templateObject","localize","_decorate","customElement","_initialize","_MwcDialog","F","_MwcDialog2","HaDialog","_getPrototypeOf2","_this","_classCallCheck","this","_len","arguments","length","args","Array","_key","_getPrototypeOf","call","apply","concat","_assertThisInitialized","_inherits","d","kind","static","key","value","style","css","_templateObject2","DialogLovelaceResourceDetail","_LitElement","_LitElement2","decorators","property","_showDialog","_asyncToGenerator","regeneratorRuntime","mark","_callee","params","wrap","_context","prev","next","_params","_error","undefined","resource","_url","url","_type","type","updateComplete","stop","_x","urlInvalid","trim","_close","_templateObject3","_urlChanged","_typeChanged","_templateObject4","_templateObject5","_templateObject6","_deleteResource","_submitting","_templateObject7","_updateResource","ev","detail","item","getAttribute","_updateResource2","_callee2","values","_context2","res_type","updateResource","createResource","t0","message","finish","_deleteResource2","_callee3","_context3","removeResource","sent","haStyleDialog","_templateObject8","LitElement"],"mappings":"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","file":"chunk.0f56efd4a2cdfef8d457.js","sourcesContent":["import { customElement, CSSResult, css, html } from \"lit-element\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport \"@material/mwc-dialog\";\nimport { style } from \"@material/mwc-dialog/mwc-dialog-css\";\n// tslint:disable-next-line\nimport { Dialog } from \"@material/mwc-dialog\";\nimport { Constructor, HomeAssistant } from \"../types\";\n// tslint:disable-next-line\nconst MwcDialog = customElements.get(\"mwc-dialog\") as Constructor<Dialog>;\n\nexport const createCloseHeading = (hass: HomeAssistant, title: string) => html`\n  ${title}\n  <paper-icon-button\n    aria-label=${hass.localize(\"ui.dialogs.generic.close\")}\n    icon=\"hass:close\"\n    dialogAction=\"close\"\n    class=\"close_button\"\n  ></paper-icon-button>\n`;\n\n@customElement(\"ha-dialog\")\nexport class HaDialog extends MwcDialog {\n  protected static get styles(): CSSResult[] {\n    return [\n      style,\n      css`\n        .mdc-dialog__actions {\n          justify-content: var(--justify-action-buttons, flex-end);\n        }\n        .mdc-dialog__container {\n          align-items: var(--vertial-align-dialog, center);\n        }\n        .mdc-dialog__title::before {\n          display: block;\n          height: 20px;\n        }\n        .close_button {\n          position: absolute;\n          right: 16px;\n          top: 12px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-dialog\": HaDialog;\n  }\n}\n","import {\n  css,\n  CSSResult,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from \"lit-element\";\nimport { HomeAssistant } from \"../../../../types\";\nimport {\n  LovelaceResource,\n  LovelaceResourcesMutableParams,\n} from \"../../../../data/lovelace\";\nimport { LovelaceResourceDetailsDialogParams } from \"./show-dialog-lovelace-resource-detail\";\nimport { PolymerChangedEvent } from \"../../../../polymer-types\";\nimport { createCloseHeading } from \"../../../../components/ha-dialog\";\nimport { haStyleDialog } from \"../../../../resources/styles\";\n\n@customElement(\"dialog-lovelace-resource-detail\")\nexport class DialogLovelaceResourceDetail extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() private _params?: LovelaceResourceDetailsDialogParams;\n  @property() private _url!: LovelaceResource[\"url\"];\n  @property() private _type!: LovelaceResource[\"type\"];\n  @property() private _error?: string;\n  @property() private _submitting = false;\n\n  public async showDialog(\n    params: LovelaceResourceDetailsDialogParams\n  ): Promise<void> {\n    this._params = params;\n    this._error = undefined;\n    if (this._params.resource) {\n      this._url = this._params.resource.url || \"\";\n      this._type = this._params.resource.type || \"module\";\n    } else {\n      this._url = \"\";\n      this._type = \"module\";\n    }\n    await this.updateComplete;\n  }\n\n  protected render(): TemplateResult {\n    if (!this._params) {\n      return html``;\n    }\n    const urlInvalid = this._url.trim() === \"\";\n    return html`\n      <ha-dialog\n        open\n        @closing=${this._close}\n        scrimClickAction\n        escapeKeyAction\n        .heading=${createCloseHeading(\n          this.hass,\n          this._params.resource\n            ? this._params.resource.url\n            : this.hass!.localize(\n                \"ui.panel.config.lovelace.resources.detail.new_resource\"\n              )\n        )}\n      >\n        <div>\n          ${this._error\n            ? html`\n                <div class=\"error\">${this._error}</div>\n              `\n            : \"\"}\n          <div class=\"form\">\n            <h3 class=\"warning\">\n              ${this.hass!.localize(\n                \"ui.panel.config.lovelace.resources.detail.warning_header\"\n              )}\n            </h3>\n            ${this.hass!.localize(\n              \"ui.panel.config.lovelace.resources.detail.warning_text\"\n            )}\n            <paper-input\n              .value=${this._url}\n              @value-changed=${this._urlChanged}\n              .label=${this.hass!.localize(\n                \"ui.panel.config.lovelace.resources.detail.url\"\n              )}\n              .errorMessage=${this.hass!.localize(\n                \"ui.panel.config.lovelace.resources.detail.url_error_msg\"\n              )}\n              .invalid=${urlInvalid}\n              dialogInitialFocus\n            ></paper-input>\n            <br />\n            <ha-paper-dropdown-menu\n              .label=${this.hass!.localize(\n                \"ui.panel.config.lovelace.resources.detail.type\"\n              )}\n            >\n              <paper-listbox\n                slot=\"dropdown-content\"\n                .selected=${this._type}\n                @iron-select=${this._typeChanged}\n                attr-for-selected=\"type\"\n              >\n                <paper-item type=\"module\">\n                  ${this.hass!.localize(\n                    \"ui.panel.config.lovelace.resources.types.module\"\n                  )}\n                </paper-item>\n                ${this._type === \"js\"\n                  ? html`\n                      <paper-item type=\"js\">\n                        ${this.hass!.localize(\n                          \"ui.panel.config.lovelace.resources.types.js\"\n                        )}\n                      </paper-item>\n                    `\n                  : \"\"}\n                <paper-item type=\"css\">\n                  ${this.hass!.localize(\n                    \"ui.panel.config.lovelace.resources.types.css\"\n                  )}\n                </paper-item>\n                ${this._type === \"html\"\n                  ? html`\n                      <paper-item type=\"html\">\n                        ${this.hass!.localize(\n                          \"ui.panel.config.lovelace.resources.types.html\"\n                        )}\n                      </paper-item>\n                    `\n                  : \"\"}\n              </paper-listbox>\n            </ha-paper-dropdown-menu>\n          </div>\n        </div>\n        ${this._params.resource\n          ? html`\n              <mwc-button\n                slot=\"secondaryAction\"\n                class=\"warning\"\n                @click=\"${this._deleteResource}\"\n                .disabled=${this._submitting}\n              >\n                ${this.hass!.localize(\n                  \"ui.panel.config.lovelace.resources.detail.delete\"\n                )}\n              </mwc-button>\n            `\n          : html``}\n        <mwc-button\n          slot=\"primaryAction\"\n          @click=\"${this._updateResource}\"\n          .disabled=${urlInvalid || this._submitting}\n        >\n          ${this._params.resource\n            ? this.hass!.localize(\n                \"ui.panel.config.lovelace.resources.detail.update\"\n              )\n            : this.hass!.localize(\n                \"ui.panel.config.lovelace.resources.detail.create\"\n              )}\n        </mwc-button>\n      </ha-dialog>\n    `;\n  }\n\n  private _urlChanged(ev: PolymerChangedEvent<string>) {\n    this._error = undefined;\n    this._url = ev.detail.value;\n  }\n\n  private _typeChanged(ev: CustomEvent) {\n    this._type = ev.detail.item.getAttribute(\"type\");\n  }\n\n  private async _updateResource() {\n    this._submitting = true;\n    try {\n      const values: LovelaceResourcesMutableParams = {\n        url: this._url.trim(),\n        res_type: this._type,\n      };\n      if (this._params!.resource) {\n        await this._params!.updateResource(values);\n      } else {\n        await this._params!.createResource(values);\n      }\n      this._params = undefined;\n    } catch (err) {\n      this._error = err?.message || \"Unknown error\";\n    } finally {\n      this._submitting = false;\n    }\n  }\n\n  private async _deleteResource() {\n    this._submitting = true;\n    try {\n      if (await this._params!.removeResource()) {\n        this._close();\n      }\n    } finally {\n      this._submitting = false;\n    }\n  }\n\n  private _close(): void {\n    this._params = undefined;\n  }\n\n  static get styles(): CSSResult[] {\n    return [\n      haStyleDialog,\n      css`\n        .warning {\n          color: var(--error-color);\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"dialog-lovelace-resource-detail\": DialogLovelaceResourceDetail;\n  }\n}\n"],"sourceRoot":""}