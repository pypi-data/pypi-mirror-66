{"version":3,"sources":["webpack:///./src/data/input_text.ts","webpack:///./src/panels/lovelace/entity-rows/hui-input-text-entity-row.ts"],"names":["__webpack_require__","d","__webpack_exports__","setValue","fetchInputText","createInputText","updateInputText","deleteInputText","hass","entity","value","callService","split","entity_id","callWS","type","values","Object","assign","id","updates","input_text_id","customElement","_LitElement","[object Object]","args","super","_initialize","this","property","config","Error","_config","changedProps","hasConfigOrEntityChanged","html","stateObj","states","state","attributes","min","max","pattern","mode","_selectedValueChanged","localize","shadowRoot","querySelector","ev","element","_inputEl","target","blur","LitElement"],"mappings":"wFAuBAA,EAAAC,EAAAC,EAAA,sBAAAC,IAAAH,EAAAC,EAAAC,EAAA,sBAAAE,IAAAJ,EAAAC,EAAAC,EAAA,sBAAAG,IAAAL,EAAAC,EAAAC,EAAA,sBAAAI,IAAAN,EAAAC,EAAAC,EAAA,sBAAAK,IAAO,MAAMJ,EAAW,CAACK,EAAqBC,EAAgBC,IAC5DF,EAAKG,YAAYF,EAAOG,MAAM,IAAK,GAAG,GAAI,YAAa,CACrDF,QACAG,UAAWJ,IAGFL,EAAkBI,GAC7BA,EAAKM,OAAoB,CAAEC,KAAM,oBAEtBV,EAAkB,CAC7BG,EACAQ,IAEAR,EAAKM,OAALG,OAAAC,OAAA,CACEH,KAAM,qBACHC,IAGMV,EAAkB,CAC7BE,EACAW,EACAC,IAEAZ,EAAKM,OAALG,OAAAC,OAAA,CACEH,KAAM,oBACNM,cAAeF,GACZC,IAGMb,EAAkB,CAACC,EAAqBW,IACnDX,EAAKM,OAAO,CACVC,KAAM,oBACNM,cAAeF,umOCrClBG,YAAc,qDAAf,cAAAC,EACsEC,eAAAC,GAAAC,SAAAD,GAAAE,EAAAC,qCACnEC,kEAEAA,gFAED,SAAiBC,GACf,IAAKA,EACH,MAAM,IAAIC,MAAM,uBAElBH,KAAKI,QAAUF,4CAGjB,SAAuBG,GACrB,OAAOC,YAAyBN,KAAMK,uCAGxC,WACE,IAAKL,KAAKI,UAAYJ,KAAKpB,KACzB,OAAO2B,MAGT,MAAMC,EAAWR,KAAKpB,KAAK6B,OAAOT,KAAKI,QAAQvB,QAE/C,OAAK2B,EAYED;sCAC2BP,KAAKpB,gBAAgBoB,KAAKI;;;oBAG5CI,EAASE;wBACLF,EAASG,WAAWC;wBACpBJ,EAASG,WAAWE;2BACjBL,EAASG,WAAWG;sBACzBN,EAASG,WAAWG;mBACvBN,EAASG,WAAWI;qBAClBf,KAAKgB;;;;MArBbT;;aAEAP,KAAKpB,KAAKqC,SACX,6CACA,SACAjB,KAAKI,QAAQvB;;2CAuBvB,WACE,OAAOmB,KAAKkB,WAAYC,cAAc,kEAGxC,SAA8BC,GAC5B,MAAMC,EAAUrB,KAAKsB,SACfd,EAAWR,KAAKpB,KAAM6B,OAAOT,KAAKI,QAASvB,QAE7CwC,EAAQvC,QAAU0B,EAASE,OAC7BnC,YAASyB,KAAKpB,KAAO4B,EAASvB,UAAWoC,EAAQvC,OAGnDsC,EAAGG,OAAOC,YAhEsBC","file":"chunk.34f8fc9c8cc9dbd78a90.js","sourcesContent":["import { HomeAssistant } from \"../types\";\n\nexport interface InputText {\n  id: string;\n  name: string;\n  icon?: string;\n  initial?: string;\n  min?: number;\n  max?: number;\n  pattern?: string;\n  mode?: \"text\" | \"password\";\n}\n\nexport interface InputTextMutableParams {\n  name: string;\n  icon: string;\n  initial: string;\n  min: number;\n  max: number;\n  pattern: string;\n  mode: \"text\" | \"password\";\n}\n\nexport const setValue = (hass: HomeAssistant, entity: string, value: string) =>\n  hass.callService(entity.split(\".\", 1)[0], \"set_value\", {\n    value,\n    entity_id: entity,\n  });\n\nexport const fetchInputText = (hass: HomeAssistant) =>\n  hass.callWS<InputText[]>({ type: \"input_text/list\" });\n\nexport const createInputText = (\n  hass: HomeAssistant,\n  values: InputTextMutableParams\n) =>\n  hass.callWS<InputText>({\n    type: \"input_text/create\",\n    ...values,\n  });\n\nexport const updateInputText = (\n  hass: HomeAssistant,\n  id: string,\n  updates: Partial<InputTextMutableParams>\n) =>\n  hass.callWS<InputText>({\n    type: \"input_text/update\",\n    input_text_id: id,\n    ...updates,\n  });\n\nexport const deleteInputText = (hass: HomeAssistant, id: string) =>\n  hass.callWS({\n    type: \"input_text/delete\",\n    input_text_id: id,\n  });\n","import {\n  html,\n  LitElement,\n  TemplateResult,\n  property,\n  customElement,\n  PropertyValues,\n} from \"lit-element\";\nimport { PaperInputElement } from \"@polymer/paper-input/paper-input\";\n\nimport \"../components/hui-generic-entity-row\";\nimport \"../components/hui-warning\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { LovelaceRow, EntityConfig } from \"./types\";\nimport { setValue } from \"../../../data/input_text\";\nimport { hasConfigOrEntityChanged } from \"../common/has-changed\";\n\n@customElement(\"hui-input-text-entity-row\")\nclass HuiInputTextEntityRow extends LitElement implements LovelaceRow {\n  @property() public hass?: HomeAssistant;\n\n  @property() private _config?: EntityConfig;\n\n  public setConfig(config: EntityConfig): void {\n    if (!config) {\n      throw new Error(\"Configuration error\");\n    }\n    this._config = config;\n  }\n\n  protected shouldUpdate(changedProps: PropertyValues): boolean {\n    return hasConfigOrEntityChanged(this, changedProps);\n  }\n\n  protected render(): TemplateResult {\n    if (!this._config || !this.hass) {\n      return html``;\n    }\n\n    const stateObj = this.hass.states[this._config.entity];\n\n    if (!stateObj) {\n      return html`\n        <hui-warning\n          >${this.hass.localize(\n            \"ui.panel.lovelace.warning.entity_not_found\",\n            \"entity\",\n            this._config.entity\n          )}</hui-warning\n        >\n      `;\n    }\n\n    return html`\n      <hui-generic-entity-row .hass=${this.hass} .config=${this._config}>\n        <paper-input\n          no-label-float\n          .value=\"${stateObj.state}\"\n          .minlength=\"${stateObj.attributes.min}\"\n          .maxlength=\"${stateObj.attributes.max}\"\n          .autoValidate=\"${stateObj.attributes.pattern}\"\n          .pattern=\"${stateObj.attributes.pattern}\"\n          .type=\"${stateObj.attributes.mode}\"\n          @change=\"${this._selectedValueChanged}\"\n          placeholder=\"(empty value)\"\n        ></paper-input>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  private get _inputEl(): PaperInputElement {\n    return this.shadowRoot!.querySelector(\"paper-input\") as PaperInputElement;\n  }\n\n  private _selectedValueChanged(ev): void {\n    const element = this._inputEl;\n    const stateObj = this.hass!.states[this._config!.entity];\n\n    if (element.value !== stateObj.state) {\n      setValue(this.hass!, stateObj.entity_id, element.value!);\n    }\n\n    ev.target.blur();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hui-input-text-entity-row\": HuiInputTextEntityRow;\n  }\n}\n"],"sourceRoot":""}