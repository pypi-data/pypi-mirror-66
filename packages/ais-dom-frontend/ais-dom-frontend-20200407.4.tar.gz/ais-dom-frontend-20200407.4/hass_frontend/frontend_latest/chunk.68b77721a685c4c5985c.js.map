{"version":3,"sources":["webpack:///./src/mixins/events-mixin.js","webpack:///./src/dialogs/generic/show-dialog-box.ts","webpack:///./src/components/ha-switch.ts","webpack:///./src/components/buttons/ha-call-service-button.js","webpack:///./src/components/buttons/ha-progress-button.js","webpack:///./src/panels/config/ais_dom/ha-config-ais-dom-navigation.ts","webpack:///./src/panels/config/ais_dom/ha-config-ais-dom-dashboard.ts","webpack:///./src/panels/config/ais_dom/ha-config-ais-dom-config-update.js"],"names":["__webpack_require__","d","__webpack_exports__","EventsMixin","_polymer_polymer_lib_utils_mixin__WEBPACK_IMPORTED_MODULE_0__","_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_1__","dedupingMixin","superClass","fire","type","detail","options","fireEvent","node","this","showAlertDialog","showConfirmationDialog","showPromptDialog","_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__","loadGenericDialog","Promise","all","e","then","bind","showDialogHelper","element","dialogParams","extra","resolve","origCancel","cancel","origConfirm","confirm","dialogTag","dialogImport","Object","assign","prompt","out","confirmation","MwcSwitch","customElements","get","_decorate","customElement","_initialize","_MwcSwitch","HaSwitch","[object Object]","args","super","F","kind","decorators","property","Boolean","key","value","query","_get","_getPrototypeOf","prototype","call","style","setProperty","classList","toggle","_slot","assignedNodes","length","addEventListener","haptic","forwardHaptic","html","ripple","interactionNode","_haChangeHandler","static","css","mdcFoundation","handleChange","checked","formElement","_polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_0__","_polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_1__","_mixins_events_mixin__WEBPACK_IMPORTED_MODULE_3__","_dialogs_generic_show_dialog_box__WEBPACK_IMPORTED_MODULE_4__","define","PolymerElement","template","properties","hass","progress","domain","String","service","serviceData","callService","el","eventData","$","actionSuccess","success","actionError","buttonTapped","text","_polymer_polymer_lib_utils_html_tag__WEBPACK_IMPORTED_MODULE_2__","_polymer_polymer_polymer_element__WEBPACK_IMPORTED_MODULE_3__","disabled","tempClass","className","container","add","setTimeout","remove","ready","ev","stopPropagation","computeDisabled","aisGateConfigSections","integrations","component","path","translationKey","icon","core","_LitElement","values","map","section","showAdvanced","LitElement","localize","haStyle","r","isWide","aisVersionInfo","computed","aisBackupInfo","aisAutoUpdateInfo","aisAutoUpdateIcon","aisAutoUpdatFullInfo","Array","aisBackupFullInfo","aisButtonVersionCheckUpgrade","aisUpdateSystemData","say","autoUpdateMode","validating","backupStep","validateLog","backupInfo","backupError","restoreInfo","restoreError","isBackupValid","step","computeClasses","_computeAisVersionInfo","versionInfo","states","versionInfoAttr","attributes","push","name","update_check_time","getVersionName","update_status","getVersionIcon","dom_app_current_version","new_value","dom_app_newest_version","reinstall_dom_app","android_app_current_version","android_app_newest_version","reinstall_android_app","linux_apt_current_version","linux_apt_newest_version","reinstall_linux_apt","state","_computeAisBackupStep","_computeAisBackupInfo","backupInfoAttr","backup_info","backup_error","restore_info","restore_error","file_name","file_size","status","retS","_computeAisButtonVersionCheckUpgrade","attr","_computeAutoUpdateMode","_isEqualTo","currentStep","stepNumber","changeAutoUpdateMode","entity_id","doBackup","callApi","result","valid","errors","password","shadowRoot","getElementById","restoreBackup"],"mappings":"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","file":"chunk.68b77721a685c4c5985c.js","sourcesContent":["import { dedupingMixin } from \"@polymer/polymer/lib/utils/mixin\";\n\nimport { fireEvent } from \"../common/dom/fire_event\";\n\n// Polymer legacy event helpers used courtesy of the Polymer project.\n//\n// Copyright (c) 2017 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//    * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//    * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//    * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n/* @polymerMixin */\nexport const EventsMixin = dedupingMixin(\n  (superClass) =>\n    class extends superClass {\n      /**\n   * Dispatches a custom event with an optional detail value.\n   *\n   * @param {string} type Name of event type.\n   * @param {*=} detail Detail value containing event-specific\n   *   payload.\n   * @param {{ bubbles: (boolean|undefined),\n               cancelable: (boolean|undefined),\n                composed: (boolean|undefined) }=}\n    *  options Object specifying options.  These may include:\n    *  `bubbles` (boolean, defaults to `true`),\n    *  `cancelable` (boolean, defaults to false), and\n    *  `node` on which to fire the event (HTMLElement, defaults to `this`).\n    * @return {Event} The new event that was fired.\n    */\n      fire(type, detail, options) {\n        options = options || {};\n        return fireEvent(options.node || this, type, detail, options);\n      }\n    }\n);\n","import { fireEvent } from \"../../common/dom/fire_event\";\nimport { TemplateResult } from \"lit-html\";\n\ninterface BaseDialogParams {\n  confirmText?: string;\n  text?: string | TemplateResult;\n  title?: string;\n}\n\nexport interface AlertDialogParams extends BaseDialogParams {\n  confirm?: () => void;\n}\n\nexport interface ConfirmationDialogParams extends BaseDialogParams {\n  dismissText?: string;\n  confirm?: () => void;\n  cancel?: () => void;\n}\n\nexport interface PromptDialogParams extends BaseDialogParams {\n  inputLabel?: string;\n  inputType?: string;\n  defaultValue?: string;\n  confirm?: (out?: string) => void;\n}\n\nexport interface DialogParams\n  extends ConfirmationDialogParams,\n    PromptDialogParams {\n  confirm?: (out?: string) => void;\n  confirmation?: boolean;\n  prompt?: boolean;\n}\n\nexport const loadGenericDialog = () =>\n  import(/* webpackChunkName: \"confirmation\" */ \"./dialog-box\");\n\nconst showDialogHelper = (\n  element: HTMLElement,\n  dialogParams: DialogParams,\n  extra?: {\n    confirmation?: DialogParams[\"confirmation\"];\n    prompt?: DialogParams[\"prompt\"];\n  }\n) =>\n  new Promise((resolve) => {\n    const origCancel = dialogParams.cancel;\n    const origConfirm = dialogParams.confirm;\n\n    fireEvent(element, \"show-dialog\", {\n      dialogTag: \"dialog-box\",\n      dialogImport: loadGenericDialog,\n      dialogParams: {\n        ...dialogParams,\n        ...extra,\n        cancel: () => {\n          resolve(extra?.prompt ? null : false);\n          if (origCancel) {\n            origCancel();\n          }\n        },\n        confirm: (out) => {\n          resolve(extra?.prompt ? out : true);\n          if (origConfirm) {\n            origConfirm(out);\n          }\n        },\n      },\n    });\n  });\n\nexport const showAlertDialog = (\n  element: HTMLElement,\n  dialogParams: AlertDialogParams\n) => showDialogHelper(element, dialogParams);\n\nexport const showConfirmationDialog = (\n  element: HTMLElement,\n  dialogParams: ConfirmationDialogParams\n) =>\n  showDialogHelper(element, dialogParams, { confirmation: true }) as Promise<\n    boolean\n  >;\n\nexport const showPromptDialog = (\n  element: HTMLElement,\n  dialogParams: PromptDialogParams\n) =>\n  showDialogHelper(element, dialogParams, { prompt: true }) as Promise<\n    null | string\n  >;\n","import {\n  customElement,\n  CSSResult,\n  css,\n  query,\n  html,\n  property,\n} from \"lit-element\";\nimport \"@material/mwc-switch\";\nimport { style } from \"@material/mwc-switch/mwc-switch-css\";\n// tslint:disable-next-line\nimport { Switch } from \"@material/mwc-switch\";\nimport { Constructor } from \"../types\";\nimport { forwardHaptic } from \"../data/haptics\";\nimport { ripple } from \"@material/mwc-ripple/ripple-directive\";\n// tslint:disable-next-line\nconst MwcSwitch = customElements.get(\"mwc-switch\") as Constructor<Switch>;\n\n@customElement(\"ha-switch\")\nexport class HaSwitch extends MwcSwitch {\n  // Generate a haptic vibration.\n  // Only set to true if the new value of the switch is applied right away when toggling.\n  // Do not add haptic when a user is required to press save.\n  @property({ type: Boolean }) public haptic = false;\n  @query(\"slot\") private _slot!: HTMLSlotElement;\n\n  protected firstUpdated() {\n    super.firstUpdated();\n    this.style.setProperty(\n      \"--mdc-theme-secondary\",\n      \"var(--switch-checked-color)\"\n    );\n    this.classList.toggle(\n      \"slotted\",\n      Boolean(this._slot.assignedNodes().length)\n    );\n    this.addEventListener(\"change\", () => {\n      if (this.haptic) {\n        forwardHaptic(\"light\");\n      }\n    });\n  }\n\n  protected render() {\n    return html`\n      <div class=\"mdc-switch\">\n        <div class=\"mdc-switch__track\"></div>\n        <div\n          class=\"mdc-switch__thumb-underlay\"\n          .ripple=\"${ripple({\n            interactionNode: this,\n          })}\"\n        >\n          <div class=\"mdc-switch__thumb\">\n            <input\n              type=\"checkbox\"\n              id=\"basic-switch\"\n              class=\"mdc-switch__native-control\"\n              role=\"switch\"\n              @change=\"${this._haChangeHandler}\"\n            />\n          </div>\n        </div>\n      </div>\n      <label for=\"basic-switch\"><slot></slot></label>\n    `;\n  }\n\n  protected static get styles(): CSSResult[] {\n    return [\n      style,\n      css`\n        :host {\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n        }\n        .mdc-switch.mdc-switch--checked .mdc-switch__thumb {\n          background-color: var(--switch-checked-button-color);\n          border-color: var(--switch-checked-button-color);\n        }\n        .mdc-switch.mdc-switch--checked .mdc-switch__track {\n          background-color: var(--switch-checked-track-color);\n          border-color: var(--switch-checked-track-color);\n        }\n        .mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb {\n          background-color: var(--switch-unchecked-button-color);\n          border-color: var(--switch-unchecked-button-color);\n        }\n        .mdc-switch:not(.mdc-switch--checked) .mdc-switch__track {\n          background-color: var(--switch-unchecked-track-color);\n          border-color: var(--switch-unchecked-track-color);\n        }\n        :host(.slotted) .mdc-switch {\n          margin-right: 24px;\n        }\n      `,\n    ];\n  }\n\n  private _haChangeHandler(e: Event) {\n    this.mdcFoundation.handleChange(e);\n    // catch \"click\" event and sync properties\n    this.checked = this.formElement.checked;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-switch\": HaSwitch;\n  }\n}\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"./ha-progress-button\";\nimport { EventsMixin } from \"../../mixins/events-mixin\";\nimport { showConfirmationDialog } from \"../../dialogs/generic/show-dialog-box\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaCallServiceButton extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <ha-progress-button\n        id=\"progress\"\n        progress=\"[[progress]]\"\n        on-click=\"buttonTapped\"\n        tabindex=\"0\"\n        ><slot></slot\n      ></ha-progress-button>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      domain: {\n        type: String,\n      },\n\n      service: {\n        type: String,\n      },\n\n      serviceData: {\n        type: Object,\n        value: {},\n      },\n\n      confirmation: {\n        type: String,\n      },\n    };\n  }\n\n  callService() {\n    this.progress = true;\n    var el = this;\n    var eventData = {\n      domain: this.domain,\n      service: this.service,\n      serviceData: this.serviceData,\n    };\n\n    this.hass\n      .callService(this.domain, this.service, this.serviceData)\n      .then(\n        function() {\n          el.progress = false;\n          el.$.progress.actionSuccess();\n          eventData.success = true;\n        },\n        function() {\n          el.progress = false;\n          el.$.progress.actionError();\n          eventData.success = false;\n        }\n      )\n      .then(function() {\n        el.fire(\"hass-service-called\", eventData);\n      });\n  }\n\n  buttonTapped() {\n    if (this.confirmation) {\n      showConfirmationDialog(this, {\n        text: this.confirmation,\n        confirm: () => this.callService(),\n      });\n    } else {\n      this.callService();\n    }\n  }\n}\n\ncustomElements.define(\"ha-call-service-button\", HaCallServiceButton);\n","import \"@material/mwc-button\";\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nclass HaProgressButton extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        .container {\n          position: relative;\n          display: inline-block;\n        }\n\n        mwc-button {\n          transition: all 1s;\n        }\n\n        .success mwc-button {\n          --mdc-theme-primary: white;\n          background-color: var(--google-green-500);\n          transition: none;\n        }\n\n        .error mwc-button {\n          --mdc-theme-primary: white;\n          background-color: var(--google-red-500);\n          transition: none;\n        }\n\n        .progress {\n          @apply --layout;\n          @apply --layout-center-center;\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n        }\n      </style>\n      <div class=\"container\" id=\"container\">\n        <mwc-button\n          id=\"button\"\n          disabled=\"[[computeDisabled(disabled, progress)]]\"\n          on-click=\"buttonTapped\"\n        >\n          <slot></slot>\n        </mwc-button>\n        <template is=\"dom-if\" if=\"[[progress]]\">\n          <div class=\"progress\"><paper-spinner active=\"\"></paper-spinner></div>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      disabled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  tempClass(className) {\n    var classList = this.$.container.classList;\n    classList.add(className);\n    setTimeout(() => {\n      classList.remove(className);\n    }, 1000);\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener(\"click\", (ev) => this.buttonTapped(ev));\n  }\n\n  buttonTapped(ev) {\n    if (this.progress) ev.stopPropagation();\n  }\n\n  actionSuccess() {\n    this.tempClass(\"success\");\n  }\n\n  actionError() {\n    this.tempClass(\"error\");\n  }\n\n  computeDisabled(disabled, progress) {\n    return disabled || progress;\n  }\n}\n\ncustomElements.define(\"ha-progress-button\", HaProgressButton);\n","import \"@polymer/iron-icon/iron-icon\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport \"@polymer/paper-item/paper-item\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon-next\";\nimport { PageNavigation } from \"../../../layouts/hass-tabs-subpage\";\nimport {\n  LitElement,\n  html,\n  TemplateResult,\n  property,\n  customElement,\n  CSSResult,\n  css,\n} from \"lit-element\";\nimport { HomeAssistant } from \"../../../types\";\nimport \"../dashboard/ha-config-navigation\";\n\nconst aisGateConfigSections: { [name: string]: PageNavigation[] } = {\n  integrations: [\n    {\n      component: \"ais_dom_config_update\",\n      path: \"/config/ais_dom_config_update\",\n      translationKey: \"ui.panel.config.ais_dom_config_update.caption\",\n      icon: \"mdi:cloud-sync-outline\",\n      core: true,\n    },\n    {\n      component: \"ais_dom_config_wifi\",\n      path: \"/config/ais_dom_config_wifi\",\n      translationKey: \"ui.panel.config.ais_dom_config_wifi.caption\",\n      icon: \"mdi:wifi\",\n      core: true,\n    },\n    {\n      component: \"ais_dom_config_display\",\n      path: \"/config/ais_dom_config_display\",\n      translationKey: \"ui.panel.config.ais_dom_config_display.caption\",\n      icon: \"mdi:monitor-edit\",\n      core: true,\n    },\n    {\n      component: \"ais_dom_config_tts\",\n      path: \"/config/ais_dom_config_tts\",\n      translationKey: \"ui.panel.config.ais_dom_config_tts.caption\",\n      icon: \"mdi:account-tie-voice\",\n      core: true,\n    },\n    {\n      component: \"ais_dom_config_night\",\n      path: \"/config/ais_dom_config_night\",\n      translationKey: \"ui.panel.config.ais_dom_config_night.caption\",\n      icon: \"mdi:weather-night\",\n      core: true,\n    },\n    {\n      component: \"ais_dom_config_remote\",\n      path: \"/config/ais_dom_config_remote\",\n      translationKey: \"ui.panel.config.ais_dom_config_remote.caption\",\n      icon: \"mdi:web\",\n      core: true,\n    },\n    {\n      component: \"ais_dom_config_logs\",\n      path: \"/config/ais_dom_config_logs\",\n      translationKey: \"ui.panel.config.ais_dom_config_logs.caption\",\n      icon: \"mdi:database-settings\",\n      core: true,\n    },\n    {\n      component: \"ais_dom_config_power\",\n      path: \"/config/ais_dom_config_power\",\n      translationKey: \"ui.panel.config.ais_dom_config_power.caption\",\n      icon: \"mdi:restart\",\n      core: true,\n    },\n  ],\n};\n\n@customElement(\"ha-config-ais-dom-navigation\")\nclass HaConfigAisDomNavigation extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() public showAdvanced!: boolean;\n\n  protected render(): TemplateResult | void {\n    return html`\n      ${Object.values(aisGateConfigSections).map(\n        (section) => html`\n          <ha-card>\n            <ha-config-navigation\n              .hass=${this.hass}\n              .showAdvanced=${this.showAdvanced}\n              .pages=${section}\n            ></ha-config-navigation>\n          </ha-card>\n        `\n      )}\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      a {\n        text-decoration: none;\n        color: var(--primary-text-color);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-config-ais-dom-navigation\": HaConfigAisDomNavigation;\n  }\n}\n","import {\n  LitElement,\n  TemplateResult,\n  html,\n  CSSResultArray,\n  css,\n  customElement,\n  property,\n} from \"lit-element\";\nimport \"@polymer/app-layout/app-header-layout/app-header-layout\";\nimport \"@polymer/app-layout/app-header/app-header\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar\";\n\nimport \"../../../components/ha-menu-button\";\n\nimport { haStyle } from \"../../../resources/styles\";\nimport { HomeAssistant } from \"../../../types\";\n\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-icon-next\";\n\nimport \"../ha-config-section\";\nimport \"./ha-config-ais-dom-navigation\";\n\n@customElement(\"ha-config-ais-dom-dashboard\")\nclass HaConfigAisDomDashboard extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property() public narrow!: boolean;\n  @property() public isWide!: boolean;\n  @property() public showAdvanced!: boolean;\n\n  protected render(): TemplateResult {\n    return html`\n      <hass-subpage\n        header=${this.hass.localize(\"ui.panel.config.ais_dom_config.header\")}\n      >\n        <div class$=\"[[computeClasses(isWide)]]\">\n          <div class=\"content\">\n            <ha-config-section is-wide=\"[[isWide]]\">\n              <div slot=\"header\">\n                ${this.hass.localize(\"ui.panel.config.ais_dom_config.header\")}\n              </div>\n              <span slot=\"introduction\">\n                ${this.hass.localize(\n                  \"ui.panel.config.ais_dom_config.introduction\"\n                )}\n              </span>\n              <ha-config-ais-dom-navigation\n                .hass=${this.hass}\n                .show-advanced=${this.showAdvanced}\n              ></ha-config-ais-dom-navigation>\n            </ha-config-section>\n          </div>\n        </div>\n      </hass-subpage>\n    `;\n  }\n\n  static get styles(): CSSResultArray {\n    return [\n      haStyle,\n      css`\n        app-header {\n          --app-header-background-color: var(--primary-background-color);\n        }\n        ha-card:last-child {\n          margin-bottom: 24px;\n        }\n        ha-config-section {\n          margin-top: -20px;\n        }\n        ha-card {\n          overflow: hidden;\n        }\n        ha-card a {\n          text-decoration: none;\n          color: var(--primary-text-color);\n        }\n        .promo-advanced {\n          text-align: center;\n          color: var(--secondary-text-color);\n          margin-bottom: 24px;\n        }\n        .promo-advanced a {\n          color: var(--secondary-text-color);\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-config-ais-dom-dashboard\": HaConfigAisDomDashboard;\n  }\n}\n","import \"@polymer/app-layout/app-header/app-header\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../layouts/hass-subpage\";\nimport \"../../../resources/ha-style\";\n\nimport \"./ha-config-ais-dom-dashboard\";\nimport \"../../../components/ha-switch\";\nimport \"../../../components/buttons/ha-call-service-button\";\n\n/*\n *\n */\nclass HaConfigAisDomControl extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex ha-style\">\n        .content {\n          padding-bottom: 32px;\n        }\n        .border {\n          margin: 32px auto 0;\n          border-bottom: 1px solid rgba(0, 0, 0, 0.12);\n          max-width: 1040px;\n        }\n        .narrow .border {\n          max-width: 640px;\n        }\n        .center-container {\n          @apply --layout-vertical;\n          @apply --layout-center-center;\n          height: 70px;\n        }\n        table {\n          width: 100%;\n        }\n\n        td:first-child {\n          width: 33%;\n        }\n\n        .validate-container {\n          @apply --layout-vertical;\n          @apply --layout-center-center;\n          min-height: 140px;\n        }\n\n        .validate-result {\n          color: var(--google-green-500);\n          font-weight: 500;\n        }\n\n        .config-invalid .text {\n          color: var(--google-red-500);\n          font-weight: 500;\n        }\n\n        .config-invalid {\n          text-align: center;\n          margin-top: 20px;\n        }\n\n        .validate-log {\n          white-space: pre-wrap;\n          direction: ltr;\n        }\n      </style>\n\n      <hass-subpage header=\"Konfiguracja bramki AIS dom\">\n        <div class$=\"[[computeClasses(isWide)]]\">\n          <ha-config-section is-wide=\"[[isWide]]\">\n            <span slot=\"header\">Oprogramowanie bramki</span>\n            <span slot=\"introduction\"\n              >Możesz zaktualizować system do najnowszej wersji, wykonać kopię\n              zapasową ustawień i zsynchronizować bramkę z Portalem\n              Integratora</span\n            >\n            <ha-card header=\"Wersja systemu Asystent domowy\">\n              <div class=\"card-content\">\n                [[aisVersionInfo]]\n                <div>\n                  <div style=\"margin-top:30px;\" id=\"ha-switch-id\">\n                    <ha-switch\n                      checked=\"{{autoUpdateMode}}\"\n                      on-change=\"changeAutoUpdateMode\"\n                      style=\"position: absolute; right: 20px;\"\n                    ></ha-switch\n                    ><span\n                      ><h3>\n                        Autoaktualizacja\n                        <iron-icon icon=\"[[aisAutoUpdateIcon]]\"></iron-icon></h3\n                    ></span>\n                  </div>\n                </div>\n\n                <div style=\"display: inline-block;\">\n                  <div>\n                    [[aisAutoUpdateInfo]]\n                  </div>\n                  <div style=\"margin-top: 15px;\">\n                    Aktualizacje dostarczają najnowsze funkcjonalności oraz\n                    poprawki zapewniające bezpieczeństwo i stabilność działania\n                    systemu.\n                    <table style=\"margin-top: 10px;\">\n                      <template\n                        is=\"dom-repeat\"\n                        items=\"[[aisAutoUpdatFullInfo]]\"\n                      >\n                        <tr>\n                          <td>[[item.name]]</td>\n                          <td>[[item.value]]</td>\n                          <td>[[item.new_value]]</td>\n                          <td><iron-icon icon=\"[[item.icon]]\"></iron-icon></td>\n                        </tr>\n                      </template>\n                    </table>\n                  </div>\n                </div>\n                <div class=\"center-container\">\n                  <ha-call-service-button\n                    class=\"warning\"\n                    hass=\"[[hass]]\"\n                    domain=\"ais_updater\"\n                    service=\"execute_upgrade\"\n                    service-data=\"[[aisUpdateSystemData]]\"\n                    >[[aisButtonVersionCheckUpgrade]]\n                  </ha-call-service-button>\n                </div>\n              </div>\n            </ha-card>\n\n            <ha-card header=\"Kopia konfiguracji Bramki\">\n              <div class=\"card-content\">\n                W tym miejscu możesz, sprawdzić poprawność ustawień bramki,\n                wykonać jej kopię i przesłać ją do portalu integratora. <b>Uwaga,\n                ponieważ konfiguracja może zawierać hasła i tokeny dostępu do\n                usług, zalecamy zaszyfrować ją hasłem</b>. Gdy kopia jest\n                zabezpieczona hasłem, to można ją otworzyć/przywrócić tylko po\n                podaniu hasła.\n                <h2>\n                  Nowa kopia ustawień\n                  <iron-icon icon=\"mdi:cloud-upload-outline\"></iron-icon>\n                </h2>\n                Przed wykonaniem nowej kopii ustawień sprawdź poprawność\n                konfiguracji\n                <div style=\"border-bottom: 1px solid white;\">\n                  <template is=\"dom-if\" if=\"[[!validateLog]]\">\n                    <div class=\"validate-container\">\n                      <div class=\"validate-result\" id=\"result\">\n                        [[backupInfo]]\n                      </div>\n                      <template is=\"dom-if\" if=\"[[!validating]]\">\n                        <div class=\"config-invalid\">\n                          <span class=\"text\">\n                            [[backupError]]\n                          </span>\n                        </div>\n                        <template\n                          is=\"dom-if\"\n                          if=\"[[_isEqualTo(backupStep, '1')]]\"\n                        >\n                          <paper-input\n                            placeholder=\"hasło\"\n                            no-label-float=\"\"\n                            type=\"password\"\n                            id=\"password1\"\n                          ></paper-input>\n                        </template>\n                        <mwc-button raised=\"\" on-click=\"doBackup\">\n                          <template\n                            is=\"dom-if\"\n                            if=\"[[_isEqualTo(backupStep, '0')]]\"\n                          >\n                            Sprawdź konfigurację\n                          </template>\n                          <template\n                            is=\"dom-if\"\n                            if=\"[[_isEqualTo(backupStep, '1')]]\"\n                          >\n                            Wykonaj kopie konfiguracji\n                          </template>\n                        </mwc-button>\n                      </template>\n                      <template is=\"dom-if\" if=\"[[validating]]\">\n                        <paper-spinner active=\"\"></paper-spinner>\n                      </template>\n                    </div>\n                  </template>\n                  <template is=\"dom-if\" if=\"[[validateLog]]\">\n                    <div class=\"config-invalid\">\n                      <mwc-button raised=\"\" on-click=\"doBackup\">\n                        Popraw i sprawdź ponownie\n                      </mwc-button>\n                    </div>\n                    <p></p>\n                    <div id=\"configLog\" class=\"validate-log\">\n                      [[validateLog]]\n                    </div>\n                  </template>\n                </div>\n\n                <template is=\"dom-if\" if=\"[[isBackupValid]]\">\n                  <h2>\n                    Przywracanie ustawień\n                    <iron-icon icon=\"mdi:backup-restore\"></iron-icon>\n                  </h2>\n                  <div class=\"validate-container\">\n                    <table style=\"margin-top: 40px; margin-bottom: 10px;\">\n                      <template is=\"dom-repeat\" items=\"[[aisBackupFullInfo]]\">\n                        <tr>\n                          <td>[[item.name]]</td>\n                          <td>[[item.value]]</td>\n                          <td>[[item.new_value]]</td>\n                          <td><iron-icon icon=\"[[item.icon]]\"></iron-icon></td>\n                        </tr>\n                      </template>\n                    </table>\n                      <div class=\"validate-container\">\n                        <div class=\"validate-result\" id=\"result\">\n                          [[restoreInfo]]\n                        </div>\n                        <template is=\"dom-if\" if=\"[[!validating]]\">\n                        <div class=\"config-invalid\">\n                          <span class=\"text\">\n                            [[restoreError]]\n                          </span>\n                        </div>\n                        <paper-input\n                          placeholder=\"hasło\"\n                          no-label-float=\"\"\n                          type=\"password\"\n                          id=\"password2\"\n                        ></paper-input>\n                        <mwc-button raised=\"\" on-click=\"restoreBackup\">\n                          Przywróć konfigurację z kopii\n                        </mwc-button>\n                      </div>\n                    </template>\n                    <template is=\"dom-if\" if=\"[[validating]]\">\n                      <paper-spinner active=\"\"></paper-spinner>\n                    </template>\n                  </div>\n                </template>\n              </div>\n            </ha-card>\n\n            <ha-card header=\"Synchronizacja z Portalem Integratora\">\n              <div class=\"card-content\">\n                Jeśli ostatnio wprowadzałeś zmiany w Portalu Integratora, takie\n                jak dodanie nowych typów audio czy też dostęp do zewnętrznych\n                serwisów, to przyciskiem poniżej możesz uruchomić natychmiastowe\n                pobranie tych zmian na bramkę bez czekania na automatyczną\n                synchronizację.\n                <div class=\"center-container\">\n                  <ha-call-service-button\n                    class=\"warning\"\n                    hass=\"[[hass]]\"\n                    domain=\"script\"\n                    service=\"ais_cloud_sync\"\n                    >Synchronizuj z Portalem Integratora\n                  </ha-call-service-button>\n                </div>\n              </div>\n            </ha-card>\n          </ha-config-section>\n        </div>\n      </hass-subpage>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      aisVersionInfo: {\n        type: String,\n        computed: \"_computeAisVersionInfo(hass)\",\n      },\n      aisBackupInfo: {\n        type: String,\n        computed: \"_computeAisBackupInfo(hass)\",\n      },\n      aisAutoUpdateInfo: { type: String },\n      aisAutoUpdateIcon: { type: String },\n      aisAutoUpdatFullInfo: {\n        type: Array,\n        value: [],\n      },\n      aisBackupFullInfo: {\n        type: Array,\n        value: [],\n      },\n      aisButtonVersionCheckUpgrade: {\n        type: String,\n        computed: \"_computeAisButtonVersionCheckUpgrade(hass)\",\n      },\n      aisUpdateSystemData: {\n        type: Object,\n        value: { say: true },\n      },\n      autoUpdateMode: {\n        type: Boolean,\n        computed: \"_computeAutoUpdateMode(hass)\",\n      },\n      validating: {\n        type: Boolean,\n        value: false,\n      },\n      backupStep: {\n        type: String,\n        value: \"0\",\n        computed: \"_computeAisBackupStep(hass)\",\n      },\n      validateLog: {\n        type: String,\n        value: \"\",\n      },\n      backupInfo: {\n        type: String,\n        value: \"\",\n      },\n      backupError: {\n        type: String,\n        value: \"\",\n      },\n      restoreInfo: {\n        type: String,\n        value: \"\",\n      },\n      restoreError: {\n        type: String,\n        value: \"\",\n      },\n      isBackupValid: {\n        type: Boolean,\n        value: null,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.hass.callService(\"ais_cloud\", \"set_backup_step\", {\n      step: \"0\",\n    });\n    this.hass.callService(\"ais_cloud\", \"get_backup_info\");\n  }\n\n  computeClasses(isWide) {\n    return isWide ? \"content\" : \"content narrow\";\n  }\n\n  _computeAisVersionInfo(hass) {\n    var versionInfo = hass.states[\"sensor.version_info\"];\n    var versionInfoAttr = versionInfo.attributes;\n    this.aisAutoUpdatFullInfo = [];\n\n    if (\"update_check_time\" in versionInfoAttr) {\n      this.aisAutoUpdatFullInfo.push({\n        name: \"Sprawdzono o\",\n        value: versionInfoAttr.update_check_time,\n        icon: \"\",\n      });\n    }\n\n    if (\"update_status\" in versionInfoAttr) {\n      this.aisAutoUpdatFullInfo.push({\n        name: \"Status\",\n        value: this.getVersionName(versionInfoAttr.update_status),\n        icon: this.getVersionIcon(versionInfoAttr.update_status),\n      });\n    }\n\n    if (\"dom_app_current_version\" in versionInfoAttr) {\n      this.aisAutoUpdatFullInfo.push({\n        name: \"Asystent domowy\",\n        value: versionInfoAttr.dom_app_current_version,\n        new_value: versionInfoAttr.dom_app_newest_version,\n        icon: versionInfoAttr.reinstall_dom_app ? \"hass:alert\" : \"hass:check\",\n      });\n    }\n    if (\"android_app_current_version\" in versionInfoAttr) {\n      this.aisAutoUpdatFullInfo.push({\n        name: \"Android\",\n        value: versionInfoAttr.android_app_current_version,\n        new_value: versionInfoAttr.android_app_newest_version,\n        icon: versionInfoAttr.reinstall_android_app\n          ? \"hass:alert\"\n          : \"hass:check\",\n      });\n    }\n    if (\"linux_apt_current_version\" in versionInfoAttr) {\n      this.aisAutoUpdatFullInfo.push({\n        name: \"Linux\",\n        value: versionInfoAttr.linux_apt_current_version,\n        new_value: versionInfoAttr.linux_apt_newest_version,\n        icon: versionInfoAttr.reinstall_linux_apt ? \"hass:alert\" : \"hass:check\",\n      });\n    }\n\n    return versionInfo.state;\n  }\n\n  _computeAisBackupStep(hass) {\n    var backupInfo = hass.states[\"sensor.aisbackupinfo\"];\n    if (backupInfo.state === \"0\") {\n      this.validating = false;\n    }\n    return backupInfo.state;\n  }\n\n  _computeAisBackupInfo(hass) {\n    var backupInfo = hass.states[\"sensor.aisbackupinfo\"];\n    var backupInfoAttr = backupInfo.attributes;\n    this.aisBackupFullInfo = [];\n    this.isBackupValid = false;\n    this.backupInfo = backupInfoAttr.backup_info;\n    this.backupError = backupInfoAttr.backup_error;\n    this.restoreInfo = backupInfoAttr.restore_info;\n    this.restoreError = backupInfoAttr.restore_error;\n    if (\"file_size\" in backupInfoAttr) {\n      this.isBackupValid = !!backupInfoAttr.file_name;\n      this.aisBackupFullInfo.push({\n        name: \"Kopia zapasowa\",\n        value: backupInfoAttr.file_name,\n        new_value: backupInfoAttr.file_size,\n        icon: \"mdi:check\",\n      });\n    }\n    return backupInfo.state;\n  }\n\n  getVersionName(status) {\n    var retS = status;\n    if (status === \"checking\") {\n      retS = \"Sprawdzanie\";\n    } else if (status === \"outdated\") {\n      retS = \"Nieaktualny\";\n    } else if (status === \"downloading\") {\n      retS = \"Pobieranie\";\n    } else if (status === \"installing\") {\n      retS = \"Instalowanie\";\n    } else if (status === \"updated\") {\n      retS = \"Aktualny\";\n    } else if (status === \"unknown\") {\n      retS = \"Nieznany\";\n    } else if (status === \"restart\") {\n      retS = \"Restartowanie\";\n    }\n    return retS;\n  }\n\n  getVersionIcon(status) {\n    var retS = \"\";\n    if (status === \"checking\") {\n      retS = \"mdi:cloud-sync\";\n    } else if (status === \"outdated\") {\n      retS = \"\";\n    } else if (status === \"downloading\") {\n      retS = \"mdi:progress-download\";\n    } else if (status === \"installing\") {\n      retS = \"mdi:progress-wrench\";\n    } else if (status === \"updated\") {\n      retS = \"mdi:emoticon-happy-outline\";\n    } else if (status === \"unknown\") {\n      retS = \"mdi:help-circle-outline\";\n    } else if (status === \"restart\") {\n      retS = \"mdi:restart-alert\";\n    }\n    return retS;\n  }\n\n  _computeAisButtonVersionCheckUpgrade(hass) {\n    var attr = hass.states[\"sensor.version_info\"].attributes;\n    if (\n      attr.reinstall_dom_app ||\n      attr.reinstall_android_app ||\n      attr.reinstall_linux_apt\n    ) {\n      if (attr.update_status === \"outdated\") {\n        return \"Zainstaluj teraz aktualizację\";\n      }\n      if (attr.update_status === \"unknown\") {\n        return \"Spróbuj ponownie\";\n      }\n      return \"Aktualizacja -> \" + this.getVersionName(attr.update_status);\n    }\n    return \"Sprawdź dostępność aktualizacji\";\n  }\n\n  _computeAutoUpdateMode(hass) {\n    if (hass.states[\"input_boolean.ais_auto_update\"].state === \"off\") {\n      this.aisAutoUpdateIcon = \"mdi:sync-off\";\n      this.aisAutoUpdateInfo =\n        \"Możesz aktualizować system samodzielnie w dogodnym dla Ciebie czasie lub włączyć aktualizację automatyczną.\";\n      return false;\n    }\n    this.aisAutoUpdateIcon = \"mdi:sync\";\n    this.aisAutoUpdateInfo =\n      \"Codziennie sprawdzimy i automatycznie zainstalujemy dostępne aktualizacje.\";\n    return true;\n  }\n\n  _isEqualTo(currentStep, stepNumber) {\n    return currentStep === stepNumber;\n  }\n\n  changeAutoUpdateMode() {\n    this.hass.callService(\"input_boolean\", \"toggle\", {\n      entity_id: \"input_boolean.ais_auto_update\",\n    });\n  }\n\n  doBackup() {\n    // 1. validation\n    if (this.backupStep === \"0\") {\n      this.validating = true;\n      this.validateLog = \"\";\n\n      this.hass.callApi(\"POST\", \"config/core/check_config\").then((result) => {\n        this.validating = false;\n        var valid = result.result === \"valid\" ? \"1\" : \"0\";\n        if (valid === \"0\") {\n          this.hass.callService(\"ais_cloud\", \"set_backup_step\", {\n            step: valid,\n            backup_error: \"Konfiguracja niepoprawna\",\n          });\n          this.validateLog = result.errors;\n        } else {\n          this.hass.callService(\"ais_cloud\", \"set_backup_step\", {\n            step: valid,\n            backup_info: \"Konfiguracja poprawna można wykonać kopię\",\n          });\n          this.validateLog = \"\";\n        }\n      });\n    } else {\n      // 2. backup and transfer\n      this.validating = true;\n      this.validateLog = \"\";\n      var password = this.shadowRoot.getElementById(\"password1\").value;\n      this.hass.callService(\"ais_cloud\", \"do_backup\", {\n        password: password,\n      });\n    }\n  }\n\n  restoreBackup() {\n    this.validating = true;\n    this.validateLog = \"\";\n    var password = this.shadowRoot.getElementById(\"password2\").value;\n    this.hass.callService(\"ais_cloud\", \"restore_backup\", {\n      password: password,\n    });\n  }\n}\n\ncustomElements.define(\"ha-config-ais-dom-config-update\", HaConfigAisDomControl);\n"],"sourceRoot":""}