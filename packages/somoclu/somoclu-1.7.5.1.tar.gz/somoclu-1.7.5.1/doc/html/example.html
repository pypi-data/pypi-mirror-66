

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Examples &mdash; Somoclu 1.7.5 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Somoclu 1.7.5 documentation" href="index.html"/>
        <link rel="next" title="Function Reference" href="reference.html"/>
        <link rel="prev" title="Download and Installation" href="download.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Somoclu
          

          
          </a>

          
            
            
              <div class="version">
                1.7.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="download.html">Download and Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#planar-maps">Planar maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#toroid-topology-hexagonal-grid">Toroid topology, hexagonal grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="#initialization-with-principal-component-analysis-and-clustering-the-results">Initialization with principal component analysis and clustering the results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#evolving-maps">Evolving maps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Function Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Somoclu</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Examples</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<p>Self-organizing maps are computationally intensive to train, especially
if the original space is high-dimensional or the map is large. Very
large maps where the number of neurons is at least five times the number
of data points are sometimes called emergent-self organizing maps –
these are especially demanding to train.
Somoclu is a highly
efficient, parallel and distributed algorithm to train such maps, and
its Python interface was recently updated. This enables fast training of
self-organizing maps on multicore CPUs or a GPU from Python, albeit only
on dense data, and the distributed computing capability is also not
exposed. The Python interface also lets you process the output files of
the command-line version, so if the data is sparse or the map was
trained on a cluster, you can still use the module for visualization.
Here we take a quick look at how to train and visualize a small map.</p>
<p>First, we import the necessary modules:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="k">import</span> <span class="n">Axes3D</span>
<span class="kn">import</span> <span class="nn">somoclu</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
</pre></div>
</div>
<p>Then we generate and plot some random data in three categories:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">/</span><span class="mi">5</span>
<span class="n">c2</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">/</span><span class="mi">5</span>
<span class="n">c3</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">/</span><span class="mi">5</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">)))</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">50</span>
<span class="n">colors</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;green&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
<span class="n">colors</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;blue&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">Axes3D</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">data</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">data</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">data</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="n">colors</span><span class="p">)</span>
<span class="n">labels</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">150</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/output_3_0.png" src="_images/output_3_0.png" />
<div class="section" id="planar-maps">
<h2>Planar maps<a class="headerlink" href="#planar-maps" title="Permalink to this headline">¶</a></h2>
<p>We train Somoclu with default parameter settings, asking for a large map
that qualifies as an emergent self-organizing map for this data:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">n_rows</span><span class="p">,</span> <span class="n">n_columns</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">160</span>
<span class="n">som</span> <span class="o">=</span> <span class="n">somoclu</span><span class="o">.</span><span class="n">Somoclu</span><span class="p">(</span><span class="n">n_columns</span><span class="p">,</span> <span class="n">n_rows</span><span class="p">,</span> <span class="n">compactsupport</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="o">%</span><span class="n">time</span> <span class="n">som</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CPU</span> <span class="n">times</span><span class="p">:</span> <span class="n">user</span> <span class="mf">6.99</span> <span class="n">s</span><span class="p">,</span> <span class="n">sys</span><span class="p">:</span> <span class="mf">3.33</span> <span class="n">ms</span><span class="p">,</span> <span class="n">total</span><span class="p">:</span> <span class="mf">6.99</span> <span class="n">s</span>
<span class="n">Wall</span> <span class="n">time</span><span class="p">:</span> <span class="mf">5.21</span> <span class="n">s</span>
</pre></div>
</div>
<p>We plot the component planes of the trained codebook of the ESOM:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">som</span><span class="o">.</span><span class="n">view_component_planes</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/output_7_0.png" src="_images/output_7_0.png" />
<img alt="_images/output_7_1.png" src="_images/output_7_1.png" />
<img alt="_images/output_7_2.png" src="_images/output_7_2.png" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">module</span> <span class="s1">&#39;matplotlib.pyplot&#39;</span> <span class="kn">from</span> <span class="s1">&#39;/usr/lib/python3.5/site-packages/matplotlib/pyplot.py&#39;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>We can plot the U-Matrix, together with the best matching units for each
data point. We color code the units with the classes of the data points
and also add the labels of the data points.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">som</span><span class="o">.</span><span class="n">view_umatrix</span><span class="p">(</span><span class="n">bestmatches</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bestmatchcolors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/output_9_0.png" src="_images/output_9_0.png" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">module</span> <span class="s1">&#39;matplotlib.pyplot&#39;</span> <span class="kn">from</span> <span class="s1">&#39;/usr/lib/python3.5/site-packages/matplotlib/pyplot.py&#39;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>We can also zoom into a region of interest, for instance, the dense
lower right corner:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">som</span><span class="o">.</span><span class="n">view_umatrix</span><span class="p">(</span><span class="n">bestmatches</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bestmatchcolors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>
                 <span class="n">zoom</span><span class="o">=</span><span class="p">((</span><span class="mi">50</span><span class="p">,</span> <span class="n">n_rows</span><span class="p">),</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">n_columns</span><span class="p">)))</span>
</pre></div>
</div>
<img alt="_images/output_11_0.png" src="_images/output_11_0.png" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">module</span> <span class="s1">&#39;matplotlib.pyplot&#39;</span> <span class="kn">from</span> <span class="s1">&#39;/usr/lib/python3.5/site-packages/matplotlib/pyplot.py&#39;</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="toroid-topology-hexagonal-grid">
<h2>Toroid topology, hexagonal grid<a class="headerlink" href="#toroid-topology-hexagonal-grid" title="Permalink to this headline">¶</a></h2>
<p>We can repeat the above with a toroid topology by specifying the map
type as follows:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">som</span> <span class="o">=</span> <span class="n">somoclu</span><span class="o">.</span><span class="n">Somoclu</span><span class="p">(</span><span class="n">n_columns</span><span class="p">,</span> <span class="n">n_rows</span><span class="p">,</span> <span class="n">maptype</span><span class="o">=</span><span class="s2">&quot;toroid&quot;</span><span class="p">,</span>
                      <span class="n">compactsupport</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">som</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">som</span><span class="o">.</span><span class="n">view_umatrix</span><span class="p">(</span><span class="n">bestmatches</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bestmatchcolors</span><span class="o">=</span><span class="n">colors</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/output_13_0.png" src="_images/output_13_0.png" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">module</span> <span class="s1">&#39;matplotlib.pyplot&#39;</span> <span class="kn">from</span> <span class="s1">&#39;/usr/lib/python3.5/site-packages/matplotlib/pyplot.py&#39;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Notice how the edges of the map connect to the other side. Hexagonal
neurons are also implemented:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">som</span> <span class="o">=</span> <span class="n">somoclu</span><span class="o">.</span><span class="n">Somoclu</span><span class="p">(</span><span class="n">n_columns</span><span class="p">,</span> <span class="n">n_rows</span><span class="p">,</span> <span class="n">gridtype</span><span class="o">=</span><span class="s2">&quot;hexagonal&quot;</span><span class="p">,</span>
                      <span class="n">compactsupport</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">som</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">som</span><span class="o">.</span><span class="n">view_umatrix</span><span class="p">(</span><span class="n">bestmatches</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bestmatchcolors</span><span class="o">=</span><span class="n">colors</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/output_15_0.png" src="_images/output_15_0.png" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">module</span> <span class="s1">&#39;matplotlib.pyplot&#39;</span> <span class="kn">from</span> <span class="s1">&#39;/usr/lib/python3.5/site-packages/matplotlib/pyplot.py&#39;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The separation of the individual points is more marked with these
neurons.</p>
</div>
<div class="section" id="initialization-with-principal-component-analysis-and-clustering-the-results">
<h2>Initialization with principal component analysis and clustering the results<a class="headerlink" href="#initialization-with-principal-component-analysis-and-clustering-the-results" title="Permalink to this headline">¶</a></h2>
<p>We can pass an initial codebook of our choice, but we can also ask
Somoclu to initialize the codebook with vectors from the subspace
spanned by the first two eigenvalues of the correlation matrix. To do
this, we need to pass an optional argument to the constructor:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">som</span> <span class="o">=</span> <span class="n">somoclu</span><span class="o">.</span><span class="n">Somoclu</span><span class="p">(</span><span class="n">n_columns</span><span class="p">,</span> <span class="n">n_rows</span><span class="p">,</span> <span class="n">maptype</span><span class="o">=</span><span class="s2">&quot;toroid&quot;</span><span class="p">,</span>
                      <span class="n">compactsupport</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">initialization</span><span class="o">=</span><span class="s2">&quot;pca&quot;</span><span class="p">)</span>
<span class="n">som</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">som</span><span class="o">.</span><span class="n">view_umatrix</span><span class="p">(</span><span class="n">bestmatches</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bestmatchcolors</span><span class="o">=</span><span class="n">colors</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/output_18_0.png" src="_images/output_18_0.png" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">module</span> <span class="s1">&#39;matplotlib.pyplot&#39;</span> <span class="kn">from</span> <span class="s1">&#39;/usr/lib/python3.5/site-packages/matplotlib/pyplot.py&#39;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>While one would expect entirely deterministic results on repeated runs
with the initialization based on PCA, this is not the case. The order in
which the data instances arrive matters: since Somoclu uses multiple
cores, there is no control over the order of each batch, hence the maps
will show small variation even with a PCA initalization.</p>
<p>We can also postprocess the codebook with an arbitrary clustering
algorithm that is included in
<a class="reference external" href="http://scikit-learn.org/stable/modules/classes.html#module-sklearn.cluster">scikit-learn</a>.
The default algorithm is K-means with eight clusters. After clustering,
the labels for each node are available in the SOM object in the
<code class="docutils literal notranslate"><span class="pre">clusters</span></code> class variable. If we do not pass colors to the matrix
viewing functions and clustering is already done, the plotting routines
automatically color the best matching units according to the clustering
structure.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">som</span><span class="o">.</span><span class="n">cluster</span><span class="p">()</span>
<span class="n">som</span><span class="o">.</span><span class="n">view_umatrix</span><span class="p">(</span><span class="n">bestmatches</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/output_20_0.png" src="_images/output_20_0.png" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">module</span> <span class="s1">&#39;matplotlib.pyplot&#39;</span> <span class="kn">from</span> <span class="s1">&#39;/usr/lib/python3.5/site-packages/matplotlib/pyplot.py&#39;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>We can, of course, choose another clustering algorithm, but topological
clustering methods will make little sense with their default
parameterization. DBSCAN, for instance, will assign the same class to
all nodes:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.cluster</span> <span class="k">import</span> <span class="n">DBSCAN</span>
<span class="n">algorithm</span> <span class="o">=</span> <span class="n">DBSCAN</span><span class="p">()</span>
<span class="n">som</span><span class="o">.</span><span class="n">cluster</span><span class="p">(</span><span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span><span class="p">)</span>
<span class="n">som</span><span class="o">.</span><span class="n">view_umatrix</span><span class="p">(</span><span class="n">bestmatches</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/output_22_0.png" src="_images/output_22_0.png" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">module</span> <span class="s1">&#39;matplotlib.pyplot&#39;</span> <span class="kn">from</span> <span class="s1">&#39;/usr/lib/python3.5/site-packages/matplotlib/pyplot.py&#39;</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="evolving-maps">
<h2>Evolving maps<a class="headerlink" href="#evolving-maps" title="Permalink to this headline">¶</a></h2>
<p>One of the great advantages of self-organizing maps is that they are
incremental, they can be updated with new data. This is especially
interesting if the data points retain their old label, that is, the
properties of the vectors change in the high-dimensional space. Let us
train again a toroid rectangular emergent map on the same data:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">som</span> <span class="o">=</span> <span class="n">somoclu</span><span class="o">.</span><span class="n">Somoclu</span><span class="p">(</span><span class="n">n_columns</span><span class="p">,</span> <span class="n">n_rows</span><span class="p">,</span> <span class="n">maptype</span><span class="o">=</span><span class="s2">&quot;toroid&quot;</span><span class="p">)</span>
<span class="n">som</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>Next, let us assume that the green cluster moves to the left, the other
points remaining invariant:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c2_shifted</span> <span class="o">=</span> <span class="n">c2</span> <span class="o">-</span> <span class="mf">0.2</span>
<span class="n">updated_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2_shifted</span><span class="p">,</span> <span class="n">c3</span><span class="p">)))</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">Axes3D</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">updated_data</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">updated_data</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">updated_data</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="n">colors</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">mpl_toolkits</span><span class="o">.</span><span class="n">mplot3d</span><span class="o">.</span><span class="n">art3d</span><span class="o">.</span><span class="n">Path3DCollection</span> <span class="n">at</span> <span class="mh">0x7fc9cf752470</span><span class="o">&gt;</span>
</pre></div>
</div>
<img alt="_images/output_26_1.png" src="_images/output_26_1.png" />
<p>We can update the map to reflect this shift. We plot the map before and
after continuing the training:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">som</span><span class="o">.</span><span class="n">view_umatrix</span><span class="p">(</span><span class="n">bestmatches</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bestmatchcolors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">)</span>
<span class="n">som</span><span class="o">.</span><span class="n">update_data</span><span class="p">(</span><span class="n">updated_data</span><span class="p">)</span>
<span class="n">som</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">epochs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">radius0</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">scale0</span><span class="o">=</span><span class="mf">0.02</span><span class="p">)</span>
<span class="n">som</span><span class="o">.</span><span class="n">view_umatrix</span><span class="p">(</span><span class="n">bestmatches</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bestmatchcolors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/output_28_0.png" src="_images/output_28_0.png" />
<img alt="_images/output_28_1.png" src="_images/output_28_1.png" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">module</span> <span class="s1">&#39;matplotlib.pyplot&#39;</span> <span class="kn">from</span> <span class="s1">&#39;/usr/lib/python3.5/site-packages/matplotlib/pyplot.py&#39;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>As a result of the shift, the blue points do not move around much. On
the other hand, the relationship of the red and green clusters is being
redefined as their coordinates inched closer in the original space.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="reference.html" class="btn btn-neutral float-right" title="Function Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="download.html" class="btn btn-neutral" title="Download and Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Peter Wittek, Shi Chao Gao.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.7.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>