Metadata-Version: 2.1
Name: cdk-sqs-monitored
Version: 1.0.3
Summary: AWS CDK SQS Construct with alarms and dead letter queue
Home-page: https://github.com/kamilbiela/cdk-sqs-monitored.git
Author: Kamil Biela<kamil.biela@gmail.com>
License: MIT
Project-URL: Source, https://github.com/kamilbiela/cdk-sqs-monitored.git
Platform: UNKNOWN
Classifier: Intended Audience :: Developers
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: JavaScript
Classifier: Programming Language :: Python :: 3 :: Only
Classifier: Programming Language :: Python :: 3.6
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Classifier: Typing :: Typed
Classifier: License :: OSI Approved
Requires-Python: >=3.6
Description-Content-Type: text/markdown
Requires-Dist: jsii (~=1.2.0)
Requires-Dist: publication (>=0.0.3)
Requires-Dist: aws-cdk.aws-cloudwatch-actions (==1.32.2)
Requires-Dist: aws-cdk.aws-sns (==1.32.2)
Requires-Dist: aws-cdk.aws-sns-subscriptions (==1.32.2)
Requires-Dist: aws-cdk.aws-sqs (==1.32.2)
Requires-Dist: aws-cdk.core (==1.32.2)
Requires-Dist: constructs (==2.0.1)

AWS CDK SQS Construct with alarms and dead letter queue

## What it does

Creates:

* two queues, one main and one dead letter. Dead letter has added suffix "--dead-letter" to name passed in `queueSettings.queueName`
* SNS topic with target configured to email from `alarmEmail` parameter
* alarms for both queues

  * for main queue: message age, passed as `alarmWhenMessageOlderThanSeconds` parameter
  * for dead letter: alarm triggered if there is any message

Alarms are configured to be sent as fast as possible. Note that SQS report values to CloudWatch every 5 mins.

## Installation

```bash
npm install --save cdk-sqs-monitored
```

## Usage

Minimal config:

```js
import * as cdk from '@aws-cdk/core';
import * as lib from 'cdk-sqs-monitored';

const app = new cdk.App();

export class SampleAppStack extends cdk.Stack {
  constructor(scope: cdk.App, id: string, props?: cdk.StackProps) {
      super(scope, id, props);

      new lib.MonitoredQueue(this, 'q1', {
          alarmEmail: 'your-email@test.com',
          alarmWhenMessageOlderThanSeconds: 300,
          maxReceiveCount: 3,
          queueSettings: {
              queueName: 'test-queue',
          }
      })
  }
}

new SampleAppStack(app, 'SampleappStack');
```

queueSettings parameter expects standard @aws-cdk/aws-sqs [QueueProps](https://docs.aws.amazon.com/cdk/api/latest/docs/@aws-cdk_aws-sqs.QueueProps.html) object

## Modyfying and PR

You're always welcome to create PR, but it might be best solution for you to just fork the repository and apply
the changes in your repo.

## License

MIT


