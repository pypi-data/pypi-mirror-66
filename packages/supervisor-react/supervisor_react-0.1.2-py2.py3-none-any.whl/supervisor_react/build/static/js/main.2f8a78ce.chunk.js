(this["webpackJsonpsupervisor-react"]=this["webpackJsonpsupervisor-react"]||[]).push([[0],{120:function(e,t,n){e.exports=n(164)},132:function(e,t){},134:function(e,t){},164:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n.n(a),s=n(7),c=(n(125),n(84)),l=n(111),i=n(4),u=n(208),p=n(221),m=n(219),d=n(218),f=n(167),h=n(216),E=n(222),g=n(169),v=n(225),P=n(223),w=n(213),A=n(214),N=n(215),O=n(212),b=n(211),x=n(209),k=n(224),C=n(168),j=n(226),I=n(217),S=n(210),T=n(3),G=n(83),R=n.n(G),y=n(82),U=n.n(y),F=n(108),L=n.n(F),D=n(106),B=n.n(D),z=n(110),W=n.n(z),K=n(107),H=n.n(K),$=n(109),X=n.n($),J=n(48),V=n.n(J),M=n(10),q=n.n(M),Q=n(17),Y=n(104),Z=n(127);!function(e){e[e.STOPPED=0]="STOPPED",e[e.STARTING=10]="STARTING",e[e.RUNNING=20]="RUNNING",e[e.BACKOFF=30]="BACKOFF",e[e.STOPPING=40]="STOPPING",e[e.EXITED=100]="EXITED",e[e.FATAL=200]="FATAL",e[e.UNKNOWN=1e3]="UNKNOWN"}(r||(r={}));r.STOPPED,r.EXITED,r.FATAL,r.UNKNOWN;var _,ee=[r.RUNNING,r.BACKOFF,r.STARTING];!function(e){e[e.FATAL=2]="FATAL",e[e.RUNNING=1]="RUNNING",e[e.RESTARTING=0]="RESTARTING",e[e.SHUTDOWN=-1]="SHUTDOWN"}(_||(_={}));var te=function e(t){var n=this;Object(Y.a)(this,e),this.client=void 0,this.setProcesses=void 0,this.methodCall=function(e,t){return new Promise((function(r,a){return n.client.methodCall(e,t,(function(e,t){return e?a(e):r(t)}))}))},this.getSupervisorVersion=function(){return n.methodCall("supervisor.getSupervisorVersion",[])},this.getState=Object(Q.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.getState",[]);case 2:return e.abrupt("return",e.sent.statename);case 3:case"end":return e.stop()}}),e)}))),this.getAllProcessInfo=Object(Q.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,n.methodCall("supervisor.getAllProcessInfo",[]);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.setProcesses.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)}))),this.startProcess=function(){var e=Object(Q.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.startProcess",["".concat(t.group,":").concat(t.name)]);case 2:return e.next=4,n.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.startProcessGroup=function(){var e=Object(Q.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.startProcessGroup",[t]);case 2:return e.next=4,n.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.startAllProcesses=Object(Q.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.startAllProcesses",[]);case 2:return e.next=4,n.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)}))),this.stopProcess=function(){var e=Object(Q.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.stopProcess",["".concat(t.group,":").concat(t.name)]);case 2:return e.next=4,n.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.stopProcessGroup=function(){var e=Object(Q.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.stopProcessGroup",[t]);case 2:return e.next=4,n.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.stopAllProcesses=Object(Q.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methodCall("supervisor.stopAllProcesses",[]);case 2:return e.next=4,n.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)}))),this.restartProcess=function(){var e=Object(Q.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!ee.includes(t.state)){e.next=4;break}return e.next=4,n.stopProcess(t);case 4:return e.prev=4,e.next=7,n.startProcess(t);case 7:return e.finish(4);case 8:case"end":return e.stop()}}),e,null,[[0,,4,8]])})));return function(t){return e.apply(this,arguments)}}(),this.restartProcessGroup=function(){var e=Object(Q.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.stopProcessGroup(t);case 2:return e.next=4,n.startProcessGroup(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.restartAllProcesses=Object(Q.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.stopAllProcesses();case 2:return e.next=4,n.startAllProcesses();case 4:case"end":return e.stop()}}),e)}))),this.clearProcessLogs=function(e){return n.methodCall("supervisor.clearProcessLogs",["".concat(e.group,":").concat(e.name)])},this.clearAllProcessLogs=function(){return n.methodCall("supervisor.clearAllProcessLogs",[])},this.client=Z.createClient({host:window.location.hostname,port:window.location.port,path:"/RPC2"}),this.setProcesses=t},ne=function(e){var t=e.title,n=Object(l.a)(e,["title"]);return o.a.createElement(k.a,{title:t},o.a.createElement(p.a,{component:"span"},o.a.createElement(f.a,n)))},re=Object(i.a)({root:{flexGrow:1}})(C.a),ae=function(e){var t=e.supervisor;return o.a.createElement(u.a,{position:"static"},o.a.createElement(x.a,null,o.a.createElement(f.a,{color:"inherit"},o.a.createElement(B.a,null)),o.a.createElement(E.a,{open:!1},o.a.createElement(v.a,{onClick:function(e){return t.startAllProcesses()}},"Stop all"),o.a.createElement(v.a,{onClick:function(e){return t.stopAllProcesses()}},"Start All"),o.a.createElement(v.a,{onClick:function(e){return t.restartAllProcesses()}},"Restart All"),o.a.createElement(v.a,{onClick:function(e){return t.clearAllProcessLogs()}},"Clear All"),o.a.createElement(v.a,null,"About")),o.a.createElement(re,{variant:"h5"},"Supervisor"),o.a.createElement(k.a,{title:"Reload Supervisor"},o.a.createElement(f.a,{color:"inherit",onClick:function(e){return t.getAllProcessInfo()}},o.a.createElement(H.a,null)))))},oe=Object(i.a)({root:{minHeight:45,padding:0,"&$expanded":{margin:0,minHeight:45}},content:{margin:0,minHeight:45,"&$expanded":{margin:0}},expanded:{}})(S.a),se=Object(i.a)({root:{"& td:nth-child(1)":{width:140},"& td:nth-child(2)":{width:140},"& td:nth-child(3)":{textAlign:"center",width:113},"& td:nth-child(5)":{width:132},"& td:nth-child(6)":{width:113}}})(b.a),ce=Object(i.a)((function(e){var t=e.palette;return{all:{color:t.success.main},some:{color:t.success.light},none:{color:t.warning.light}}}))((function(e){var t=e.running,n=e.length,r=e.classes;return o.a.createElement(p.a,{component:"span",className:t===n?r.all:0===t?r.none:r.some},t,"/",n)})),le=Object(i.a)((function(e){return{root:{color:e.palette.success.main}}}))(L.a),ie=Object(i.a)((function(e){return{root:{color:e.palette.error.main}}}))(U.a),ue=Object(i.a)((function(e){return{root:{color:e.palette.warning.main}}}))(U.a),pe=function(e){var t=e.process,n=e.supervisor,a=ee.includes(t.state)?n.stopProcess:n.startProcess;return o.a.createElement(k.a,{title:t.name},o.a.createElement(f.a,{size:"small",onClick:function(e){e.stopPropagation(),a(t)}},ee.includes(t.state)?o.a.createElement(le,null):t.state===r.FATAL?o.a.createElement(ie,null):o.a.createElement(ue,null)))},me=function(e){var t=e.value,n=e.processes,r=e.supervisor,a=V.a.assign({RUNNING:0,STOPPED:0},V.a.countBy(n,(function(e){return ee.includes(e.state)?"RUNNING":"STOPPED"})));return o.a.createElement(oe,null,o.a.createElement(O.a,{component:g.a,elevation:0},o.a.createElement(w.a,{size:"small"},o.a.createElement(A.a,null,o.a.createElement(se,null,o.a.createElement(N.a,null,t),o.a.createElement(N.a,null),o.a.createElement(N.a,null,o.a.createElement(ce,{running:a.RUNNING,length:n.length})),o.a.createElement(N.a,null,n.map((function(e){return o.a.createElement(pe,{key:e.name,process:e,supervisor:r})}))),o.a.createElement(N.a,{padding:"none"},o.a.createElement(ne,{title:"Stop Group",color:"primary",onClick:function(e){e.stopPropagation(),r.stopProcessGroup(t)},disabled:0===a.RUNNING},o.a.createElement(X.a,{fontSize:"small"})),o.a.createElement(ne,{title:"Start",color:"primary",onClick:function(e){e.stopPropagation(),r.startProcessGroup(t)},disabled:a.RUNNING===n.length},o.a.createElement(W.a,{fontSize:"small"})),o.a.createElement(ne,{title:"Restart",color:"primary",onClick:function(e){e.stopPropagation(),r.restartProcessGroup(t)}},o.a.createElement(R.a,{fontSize:"small"}))),o.a.createElement(N.a,null))))))},de=Object(i.a)((function(e){var t=e.palette;return{root:{borderRadius:6,color:t.error.contrastText,padding:"2px 4px"},running:{backgroundColor:t.success.main},stopped:{backgroundColor:t.warning.light},fatal:{backgroundColor:t.success.main}}}))((function(e){var t=e.process,n=e.classes;return o.a.createElement(p.a,{component:"span",className:Object(T.a)(n.root,ee.includes(t.state)?n.running:t.state!==r.FATAL?n.stopped:n.fatal)},t.statename)})),fe=Object(i.a)({root:{"& td:nth-child(1)":{width:140},"& td:nth-child(2)":{width:140},"& td:nth-child(3)":{width:113},"& td:nth-child(5)":{width:132},"& td:nth-child(6)":{width:113}}})(b.a),he=Object(i.a)({root:{display:"inline-block",textAlign:"center",width:88}})(p.a),Ee=function(e){var t=e.process;return o.a.createElement(fe,null,o.a.createElement(N.a,null),o.a.createElement(N.a,null,t.name),o.a.createElement(N.a,{padding:"none",align:"center"},o.a.createElement(de,e)),o.a.createElement(N.a,null,t.description),o.a.createElement(N.a,{padding:"none"},o.a.createElement(he,{component:"span"},o.a.createElement(P.a,{size:"small",checked:ee.includes(t.state),onChange:function(n){return(ee.includes(t.state)?e.supervisor.stopProcess:e.supervisor.startProcess)(t)}})),o.a.createElement(ne,{title:"Restart",color:"primary",onClick:function(n){return e.supervisor.restartProcess(t)}},o.a.createElement(R.a,{fontSize:"small"}))),o.a.createElement(N.a,null,o.a.createElement(h.a,{href:"logtail/".concat(t.group,":").concat(t.name)},"stdout"),"\xa0",o.a.createElement(h.a,{href:"logtail/".concat(t.group,":").concat(t.name,"/stderr")},"stderr")))},ge=Object(i.a)({root:{padding:0}})(I.a),ve=function(e){return o.a.createElement(ge,null,o.a.createElement(O.a,null,o.a.createElement(w.a,{size:"small"},o.a.createElement(A.a,null,e.processes.map((function(t){return o.a.createElement(Ee,Object.assign({key:t.name,process:t},e))}))))))},Pe=Object(i.a)({root:{"&$expanded":{margin:0},backgroundColor:"unset"},expanded:{}})(j.a),we=function(e){return o.a.createElement(Pe,{elevation:0},o.a.createElement(me,e),o.a.createElement(ve,e))},Ae=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],s=new te(r);return Object(a.useEffect)((function(){s.getAllProcessInfo()}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,null),o.a.createElement(m.a,{fixed:!0},o.a.createElement(ae,{supervisor:s}),V()(n).groupBy("group").toPairs().sortBy().map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return o.a.createElement(we,{key:n,value:n,processes:V.a.sortBy(r,"name"),supervisor:s})})).value()))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(s.render)(o.a.createElement(a.StrictMode,null,o.a.createElement(Ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[120,1,2]]]);